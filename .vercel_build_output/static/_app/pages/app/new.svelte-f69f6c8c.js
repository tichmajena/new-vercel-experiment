import{S as F,i as Q,s as R,e as w,t as C,k as T,j as $,c as j,a as k,g as D,d as h,n as I,m as P,f as N,G as b,o as J,x as M,u as q,v as G,K as Z,b as a,W as x,Y as O,H,D as U,E as V,I as ee,X as te,L as le}from"../../chunks/vendor-52b416c4.js";import{b as K}from"../../chunks/store-18dbc89f.js";import{B as se}from"../../chunks/index-4a09887f.js";import{C as ne}from"../../chunks/Card-bccc4dc3.js";import{g as oe}from"../../chunks/navigation-51b348a1.js";import"../../chunks/singletons-ff603286.js";function W(s,t,e){const l=s.slice();return l[15]=t[e],l[16]=t,l[17]=e,l}function X(s){let t,e,l,u,d;function n(){return s[10](s[17])}return{c(){t=w("button"),e=U("svg"),l=U("path"),this.h()},l(i){t=j(i,"BUTTON",{class:!0});var f=k(t);e=V(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var v=k(e);l=V(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(l).forEach(h),v.forEach(h),f.forEach(h),this.h()},h(){a(l,"stroke-linecap","round"),a(l,"stroke-linejoin","round"),a(l,"stroke-width","2"),a(l,"d","M20 12H4"),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"class","h-4 w-4"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24"),a(e,"stroke","currentColor"),a(t,"class","text-white bg-pink-700 grid place-items-center rounded-full h-8 w-8 items-center justify-center")},m(i,f){N(i,t,f),b(t,e),b(e,l),u||(d=H(t,"click",n),u=!0)},p(i,f){s=i},d(i){i&&h(t),u=!1,d()}}}function Y(s){let t,e,l,u,d;return{c(){t=w("button"),e=U("svg"),l=U("path"),this.h()},l(n){t=j(n,"BUTTON",{class:!0});var i=k(t);e=V(i,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var f=k(e);l=V(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),k(l).forEach(h),f.forEach(h),i.forEach(h),this.h()},h(){a(l,"stroke-linecap","round-full"),a(l,"stroke-linejoin","round-full"),a(l,"stroke-width","2"),a(l,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"class","h-5 w-5"),a(e,"fill","none"),a(e,"viewBox","0 0 24 24"),a(e,"stroke","currentColor"),a(t,"class","text-white bg-green-700 grid place-items-center rounded-full h-8 w-8 items-center justify-center")},m(n,i){N(n,t,i),b(t,e),b(e,l),u||(d=H(t,"click",s[3]),u=!0)},p:ee,d(n){n&&h(t),u=!1,d()}}}function z(s){let t,e,l,u,d,n,i,f,v=s[17]+1+"",y,S,g,p,o,_;function c(){s[9].call(l,s[16],s[17])}let r=s[17]!==s[1].length-1&&X(s),m=s[17]===s[1].length-1&&Y(s);return{c(){t=w("div"),e=w("div"),l=w("input"),d=T(),n=w("label"),f=C(`\r
        Step\r
        `),y=C(v),S=T(),g=w("div"),r&&r.c(),p=T(),m&&m.c(),this.h()},l(B){t=j(B,"DIV",{class:!0});var E=k(t);e=j(E,"DIV",{style:!0,class:!0});var A=k(e);l=j(A,"INPUT",{class:!0,id:!0,type:!0}),d=I(A),n=j(A,"LABEL",{class:!0,for:!0}),k(n).forEach(h),f=D(A,`\r
        Step\r
        `),y=D(A,v),A.forEach(h),S=I(E),g=j(E,"DIV",{class:!0});var L=k(g);r&&r.l(L),p=I(L),m&&m.l(L),L.forEach(h),E.forEach(h),this.h()},h(){a(l,"class","w-full rounded"),a(l,"id",u="step-"+(s[17]+1)),a(l,"type","text"),a(n,"class","text-xs"),a(n,"for",i="step-"+(s[17]+1)),x(e,"width","100%"),a(e,"class","pr-2 flex flex-col-reverse"),a(g,"class","add-btn mb-1 svelte-1n3g4k6"),a(t,"class","flex flex-row mb-5")},m(B,E){N(B,t,E),b(t,e),b(e,l),O(l,s[15].note.title),b(e,d),b(e,n),b(e,f),b(e,y),b(t,S),b(t,g),r&&r.m(g,null),b(g,p),m&&m.m(g,null),o||(_=H(l,"input",c),o=!0)},p(B,E){s=B,E&2&&l.value!==s[15].note.title&&O(l,s[15].note.title),s[17]!==s[1].length-1?r?r.p(s,E):(r=X(s),r.c(),r.m(g,p)):r&&(r.d(1),r=null),s[17]===s[1].length-1?m?m.p(s,E):(m=Y(s),m.c(),m.m(g,null)):m&&(m.d(1),m=null)},d(B){B&&h(t),r&&r.d(),m&&m.d(),o=!1,_()}}}function re(s){let t;return{c(){t=C("Save")},l(e){t=D(e,"Save")},m(e,l){N(e,t,l)},d(e){e&&h(t)}}}function ie(s){let t,e,l,u,d,n,i,f,v,y,S,g=s[1],p=[];for(let o=0;o<g.length;o+=1)p[o]=z(W(s,g,o));return f=new se({props:{color:"red",loading:ue,$$slots:{default:[re]},$$scope:{ctx:s}}}),f.$on("click",s[2]),{c(){t=w("div"),e=w("input"),l=T(),u=w("label"),d=C("App Name"),n=T();for(let o=0;o<p.length;o+=1)p[o].c();i=T(),$(f.$$.fragment),this.h()},l(o){t=j(o,"DIV",{class:!0});var _=k(t);e=j(_,"INPUT",{class:!0,type:!0}),l=I(_),u=j(_,"LABEL",{for:!0});var c=k(u);d=D(c,"App Name"),c.forEach(h),_.forEach(h),n=I(o);for(let r=0;r<p.length;r+=1)p[r].l(o);i=I(o),P(f.$$.fragment,o),this.h()},h(){a(e,"class","w-full rounded"),a(e,"type","text"),a(u,"for","Title"),a(t,"class","flex flex-col-reverse mb-5")},m(o,_){N(o,t,_),b(t,e),O(e,s[0]),b(t,l),b(t,u),b(u,d),N(o,n,_);for(let c=0;c<p.length;c+=1)p[c].m(o,_);N(o,i,_),J(f,o,_),v=!0,y||(S=H(e,"input",s[8]),y=!0)},p(o,_){if(_&1&&e.value!==o[0]&&O(e,o[0]),_&26){g=o[1];let r;for(r=0;r<g.length;r+=1){const m=W(o,g,r);p[r]?p[r].p(m,_):(p[r]=z(m),p[r].c(),p[r].m(i.parentNode,i))}for(;r<p.length;r+=1)p[r].d(1);p.length=g.length}const c={};_&262144&&(c.$$scope={dirty:_,ctx:o}),f.$set(c)},i(o){v||(M(f.$$.fragment,o),v=!0)},o(o){q(f.$$.fragment,o),v=!1},d(o){o&&h(t),o&&h(n),te(p,o),o&&h(i),G(f,o),y=!1,S()}}}function ae(s){let t,e,l,u,d;return u=new ne({props:{$$slots:{default:[ie]},$$scope:{ctx:s}}}),{c(){t=w("h1"),e=C("App notes"),l=T(),$(u.$$.fragment)},l(n){t=j(n,"H1",{});var i=k(t);e=D(i,"App notes"),i.forEach(h),l=I(n),P(u.$$.fragment,n)},m(n,i){N(n,t,i),b(t,e),N(n,l,i),J(u,n,i),d=!0},p(n,[i]){const f={};i&262147&&(f.$$scope={dirty:i,ctx:n}),u.$set(f)},i(n){d||(M(u.$$.fragment,n),d=!0)},o(n){q(u.$$.fragment,n),d=!1},d(n){n&&h(t),n&&h(l),G(u,n)}}}let ue=!1;function fe(s,t,e){let l,u;Z(s,K,c=>e(13,u=c));let{slug:d}=t,{user:n}=t;console.log(n);let{leaf:i}=t,f="",v=[{note:{title:"",steps:[]},id:""}];async function y(){console.log(n),le(K,u=[...u,l],u);let c={title:l.note.title,string:JSON.stringify(l),status:"publish",author:n.id};const r=await fetch("/app/new.json",{method:"POST",body:JSON.stringify(c)});console.log(r);const m=await r.json();console.log(m),r.ok&&oe("/app")}function S(){e(1,v=[...v,{note:{title:"",steps:[]},id:""}]),console.log(v)}function g(c){console.log(c),e(1,v=v.filter(r=>r!==v[c]))}function p(){f=this.value,e(0,f)}function o(c,r){c[r].note.title=this.value,e(1,v)}const _=c=>{g(c)};return s.$$set=c=>{"slug"in c&&e(6,d=c.slug),"user"in c&&e(7,n=c.user),"leaf"in c&&e(5,i=c.leaf)},s.$$.update=()=>{s.$$.dirty&3&&(l={note:{title:f,steps:v},id:""})},[f,v,y,S,g,i,d,n,p,o,_]}class ve extends F{constructor(t){super();Q(this,t,fe,ae,R,{slug:6,user:7,leaf:5})}}export{ve as default};
