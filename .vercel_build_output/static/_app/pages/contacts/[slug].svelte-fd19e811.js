import{S as t,i as s,s as e,e as l,t as o,k as n,c as a,a as r,g as c,d as i,n as h,b as u,T as f,f as p,F as m,V as d,G as g,D as v,H as w,j as $,m as x,o as b,v as k,r as y,w as E,l as j,h as N,u as B,U as I,I as T,B as _}from"../../chunks/vendor-d62291b3.js";import{g as L}from"../../chunks/navigation-0819b7b8.js";import{B as P}from"../../chunks/index-130bfc23.js";import{M as S}from"../../chunks/index-bc38e049.js";import"../../chunks/singletons-9c431dc7.js";function U(t,s,e){const l=t.slice();return l[16]=s[e],l[17]=s,l[18]=e,l}function V(t){let s,e,n,h;function f(){return t[12](t[18])}return{c(){s=l("button"),e=o("-"),this.h()},l(t){s=a(t,"BUTTON",{fab:!0,size:!0,class:!0});var l=r(s);e=c(l,"-"),l.forEach(i),this.h()},h(){u(s,"fab",""),u(s,"size",""),u(s,"class","red white-text text-white bg-green-600 grid place-items-center rounded-full h-12 w-12  items-center justify-center text-2xl")},m(t,l){p(t,s,l),m(s,e),n||(h=g(s,"click",f),n=!0)},p(s,e){t=s},d(t){t&&i(s),n=!1,h()}}}function A(t){let s,e,o,n,c;return{c(){s=l("button"),e=v("svg"),o=v("path"),this.h()},l(t){s=a(t,"BUTTON",{class:!0});var l=r(s);e=a(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var n=r(e);o=a(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),r(o).forEach(i),n.forEach(i),l.forEach(i),this.h()},h(){u(o,"stroke-linecap","round-full"),u(o,"stroke-linejoin","round-full"),u(o,"stroke-width","2"),u(o,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-6 w-6"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor"),u(s,"class","text-white   bg-pink-700 grid place-items-center rounded-full h-12 w-12  items-center justify-center")},m(l,a){p(l,s,a),m(s,e),m(e,o),n||(c=g(s,"click",t[6]),n=!0)},p:w,d(t){t&&i(s),n=!1,c()}}}function D(t){let s,e,v,w,$,x,b,k,y,E,j;function N(){t[11].call(x,t[17],t[18])}let B=t[18]!==t[2].length-1&&V(t),I=t[18]===t[2].length-1&&A(t);return{c(){s=l("div"),e=l("div"),v=l("label"),w=o("Phone Number..."),$=n(),x=l("input"),b=n(),k=l("div"),B&&B.c(),y=n(),I&&I.c(),this.h()},l(t){s=a(t,"DIV",{class:!0});var l=r(s);e=a(l,"DIV",{style:!0,class:!0});var o=r(e);v=a(o,"LABEL",{class:!0,for:!0});var n=r(v);w=c(n,"Phone Number..."),n.forEach(i),$=h(o),x=a(o,"INPUT",{class:!0,type:!0}),o.forEach(i),b=h(l),k=a(l,"DIV",{class:!0});var u=r(k);B&&B.l(u),y=h(u),I&&I.l(u),u.forEach(i),l.forEach(i),this.h()},h(){u(v,"class",""),u(v,"for","input-phoneNumber"),u(x,"class","bg-gray-300  hover:bg-red-400 flex flex-col"),u(x,"type","text"),f(e,"width","100%"),u(e,"class","pr-2"),u(k,"class","add-btn svelte-t3afc3"),u(s,"class","flex flex-row")},m(l,o){p(l,s,o),m(s,e),m(e,v),m(v,w),m(e,$),m(e,x),d(x,t[16]),m(s,b),m(s,k),B&&B.m(k,null),m(k,y),I&&I.m(k,null),E||(j=g(x,"input",N),E=!0)},p(s,e){t=s,4&e&&x.value!==t[16]&&d(x,t[16]),t[18]!==t[2].length-1?B?B.p(t,e):(B=V(t),B.c(),B.m(k,y)):B&&(B.d(1),B=null),t[18]===t[2].length-1?I?I.p(t,e):(I=A(t),I.c(),I.m(k,null)):I&&(I.d(1),I=null)},d(t){t&&i(s),B&&B.d(),I&&I.d(),E=!1,j()}}}function z(t){let s;return{c(){s=o("Save")},l(t){s=c(t,"Save")},m(t,e){p(t,s,e)},d(t){t&&i(s)}}}function C(t){let s,e;return s=new S({props:{color:"green",timeout:3e3,logic:t[9],$$slots:{icon:[H],message:[O]},$$scope:{ctx:t}}}),{c(){$(s.$$.fragment)},l(t){x(s.$$.fragment,t)},m(t,l){b(s,t,l),e=!0},p(t,e){const l={};524288&e&&(l.$$scope={dirty:e,ctx:t}),s.$set(l)},i(t){e||(k(s.$$.fragment,t),e=!0)},o(t){y(s.$$.fragment,t),e=!1},d(t){E(s,t)}}}function O(t){let s,e;return{c(){s=l("span"),e=o("Edit successfull"),this.h()},l(t){s=a(t,"SPAN",{slot:!0,class:!0});var l=r(s);e=c(l,"Edit successfull"),l.forEach(i),this.h()},h(){u(s,"slot","message"),u(s,"class","text-xl")},m(t,l){p(t,s,l),m(s,e)},d(t){t&&i(s)}}}function H(t){let s,e;return{c(){s=v("svg"),e=v("path"),this.h()},l(t){s=a(t,"svg",{slot:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var l=r(s);e=a(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),r(e).forEach(i),l.forEach(i),this.h()},h(){u(e,"stroke-linecap","round"),u(e,"stroke-linejoin","round"),u(e,"stroke-width","2"),u(e,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),u(s,"slot","icon"),u(s,"xmlns","http://www.w3.org/2000/svg"),u(s,"class","h-8 w-8 "),u(s,"fill","none"),u(s,"viewBox","0 0 24 24"),u(s,"stroke","currentColor")},m(t,l){p(t,s,l),m(s,e)},d(t){t&&i(s)}}}function M(t){let s,e,f,v,w,L,S,V,A,O,H,M,R,J,F,G,q,K,Q,W,X,Y,Z,tt=t[0].full_name+"",st=t[2],et=[];for(let l=0;l<st.length;l+=1)et[l]=D(U(t,st,l));K=new P({props:{color:"blue",loading:t[4],$$slots:{default:[z]},$$scope:{ctx:t}}}),K.$on("click",t[8]);let lt=t[5]&&C(t);return{c(){s=l("div"),e=l("h3"),f=o("Contacts: "),v=o(tt),w=n(),L=l("div"),S=l("label"),V=o("Name..."),A=n(),O=l("input"),H=n();for(let t=0;t<et.length;t+=1)et[t].c();M=n(),R=l("label"),J=o("Email..."),F=n(),G=l("input"),q=n(),$(K.$$.fragment),Q=n(),lt&&lt.c(),W=j(),this.h()},l(t){s=a(t,"DIV",{class:!0});var l=r(s);e=a(l,"H3",{class:!0});var o=r(e);f=c(o,"Contacts: "),v=c(o,tt),o.forEach(i),l.forEach(i),w=h(t),L=a(t,"DIV",{class:!0});var n=r(L);S=a(n,"LABEL",{class:!0,for:!0});var u=r(S);V=c(u,"Name..."),u.forEach(i),A=h(n),O=a(n,"INPUT",{class:!0,type:!0}),H=h(n);for(let s=0;s<et.length;s+=1)et[s].l(n);M=h(n),R=a(n,"LABEL",{class:!0,for:!0});var p=r(R);J=c(p,"Email..."),p.forEach(i),F=h(n),G=a(n,"INPUT",{class:!0,type:!0}),q=h(n),x(K.$$.fragment,n),n.forEach(i),Q=h(t),lt&&lt.l(t),W=j(),this.h()},h(){u(e,"class","ml-10"),u(s,"class","fixed inset-x-0 p-2 md:p-4 bg-gray-700 md:top-0 top-14 text-white text-lg md:pl-64 z-10"),u(S,"class",""),u(S,"for","input-name"),u(O,"class","bg-gray-300  hover:bg-red-400 flex flex-col"),u(O,"type","text"),u(R,"class",""),u(R,"for","input-email"),u(G,"class","bg-gray-300  hover:bg-red-400 flex flex-col"),u(G,"type","text"),u(L,"class","section md:mt-32 mt-20")},m(l,o){p(l,s,o),m(s,e),m(e,f),m(e,v),p(l,w,o),p(l,L,o),m(L,S),m(S,V),m(L,A),m(L,O),d(O,t[1]),m(L,H);for(let t=0;t<et.length;t+=1)et[t].m(L,null);m(L,M),m(L,R),m(R,J),m(L,F),m(L,G),d(G,t[3]),m(L,q),b(K,L,null),p(l,Q,o),lt&&lt.m(l,o),p(l,W,o),X=!0,Y||(Z=[g(O,"input",t[10]),g(G,"input",t[13])],Y=!0)},p(t,[s]){if((!X||1&s)&&tt!==(tt=t[0].full_name+"")&&N(v,tt),2&s&&O.value!==t[1]&&d(O,t[1]),196&s){let e;for(st=t[2],e=0;e<st.length;e+=1){const l=U(t,st,e);et[e]?et[e].p(l,s):(et[e]=D(l),et[e].c(),et[e].m(L,M))}for(;e<et.length;e+=1)et[e].d(1);et.length=st.length}8&s&&G.value!==t[3]&&d(G,t[3]);const e={};16&s&&(e.loading=t[4]),524288&s&&(e.$$scope={dirty:s,ctx:t}),K.$set(e),t[5]?lt?(lt.p(t,s),32&s&&k(lt,1)):(lt=C(t),lt.c(),k(lt,1),lt.m(W.parentNode,W)):lt&&(_(),y(lt,1,1,(()=>{lt=null})),B())},i(t){X||(k(K.$$.fragment,t),k(lt),X=!0)},o(t){y(K.$$.fragment,t),y(lt),X=!1},d(t){t&&i(s),t&&i(w),t&&i(L),I(et,t),E(K),t&&i(Q),lt&&lt.d(t),t&&i(W),Y=!1,T(Z)}}}const R=async({page:t,fetch:s})=>{console.log(t);const e=await s(`/contacts/${t.params.slug}.json`);if(console.log(e),e.ok){const t=await e.json();return{props:{post:await t[0]}}}const{message:l}=await e.json();return{error:new Error(l)}};function J(t,s,e){let l,o=!1,n=!1,a=!1,{post:r}=s;if(console.log(r),"string"==typeof r.phone_numbers){let t=r.phone_numbers.split();r.phone_numbers=t}let c=r.full_name,i=r.phone_numbers,h=r.email;function u(t){i.splice(t,1),e(2,i)}return t.$$set=t=>{"post"in t&&e(0,r=t.post)},t.$$.update=()=>{14&t.$$.dirty&&(l={title:c,full_name:c,phone_numbers:i,email:h,status:"publish"})},[r,c,i,h,o,a,function(){e(2,i=[...i,""])},u,async function(){let t=l,s=localStorage.getItem("token");console.log(s),s=JSON.parse(s),e(4,o=!0);try{const l=await fetch(`https://www.imajenation.co.zw/mydiary/wp-json/wp/v2/contact/${r.id}`,{method:"PUT",credentials:"include",headers:{"Content-type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify(t)}),c=await l.json();console.log(c),l.ok?(console.log("res is okay"),console.log(c),e(5,a=!0),e(4,o=!1),n=!1):(console.log("res has an error"),e(4,o=!1))}catch(c){console.log("ERROR!!!: ",c),e(4,o=!1)}},()=>{e(5,a=!1),L(`/contacts/${r.slug}?acas=97097`)},function(){c=this.value,e(1,c)},function(t,s){t[s]=this.value,e(2,i)},t=>{u(t)},function(){h=this.value,e(3,h)}]}export default class extends t{constructor(t){super(),s(this,t,J,M,e,{post:0})}}export{R as load};
