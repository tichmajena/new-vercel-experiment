import{S as ie,i as ue,s as ce,e as j,t as z,k as P,c as N,a as y,g as M,d as f,n as T,b as r,W as fe,f as C,G as h,Y as H,H as R,D as G,E as W,I as he,j as Z,m as x,o as ee,x as q,u as X,v as te,l as se,h as pe,w as me,X as de,J as _e,r as ge}from"../../chunks/vendor-911147da.js";import{g as ve}from"../../chunks/navigation-51b348a1.js";import{B as be}from"../../chunks/index-f86ce38b.js";import{M as we}from"../../chunks/index-b43278fd.js";import"../../chunks/singletons-ff603286.js";function le(l,e,t){const s=l.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function oe(l){let e,t,s,a;function v(){return l[12](l[18])}return{c(){e=j("button"),t=z("-"),this.h()},l(i){e=N(i,"BUTTON",{fab:!0,size:!0,class:!0});var n=y(e);t=M(n,"-"),n.forEach(f),this.h()},h(){r(e,"fab",""),r(e,"size",""),r(e,"class","red white-text text-white bg-green-600 grid place-items-center rounded-full h-12 w-12 items-center justify-center text-2xl")},m(i,n){C(i,e,n),h(e,t),s||(a=R(e,"click",v),s=!0)},p(i,n){l=i},d(i){i&&f(e),s=!1,a()}}}function ne(l){let e,t,s,a,v;return{c(){e=j("button"),t=G("svg"),s=G("path"),this.h()},l(i){e=N(i,"BUTTON",{class:!0});var n=y(e);t=W(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var u=y(t);s=W(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(s).forEach(f),u.forEach(f),n.forEach(f),this.h()},h(){r(s,"stroke-linecap","round-full"),r(s,"stroke-linejoin","round-full"),r(s,"stroke-width","2"),r(s,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),r(t,"xmlns","http://www.w3.org/2000/svg"),r(t,"class","h-6 w-6"),r(t,"fill","none"),r(t,"viewBox","0 0 24 24"),r(t,"stroke","currentColor"),r(e,"class","text-white bg-pink-700 grid place-items-center rounded-full h-12 w-12 items-center justify-center")},m(i,n){C(i,e,n),h(e,t),h(t,s),a||(v=R(e,"click",l[6]),a=!0)},p:he,d(i){i&&f(e),a=!1,v()}}}function re(l){let e,t,s,a,v,i,n,u,b,I,B;function U(){l[11].call(i,l[17],l[18])}let d=l[18]!==l[2].length-1&&oe(l),p=l[18]===l[2].length-1&&ne(l);return{c(){e=j("div"),t=j("div"),s=j("label"),a=z("Phone Number..."),v=P(),i=j("input"),n=P(),u=j("div"),d&&d.c(),b=P(),p&&p.c(),this.h()},l($){e=N($,"DIV",{class:!0});var w=y(e);t=N(w,"DIV",{style:!0,class:!0});var k=y(t);s=N(k,"LABEL",{class:!0,for:!0});var A=y(s);a=M(A,"Phone Number..."),A.forEach(f),v=T(k),i=N(k,"INPUT",{class:!0,type:!0}),k.forEach(f),n=T(w),u=N(w,"DIV",{class:!0});var c=y(u);d&&d.l(c),b=T(c),p&&p.l(c),c.forEach(f),w.forEach(f),this.h()},h(){r(s,"class",""),r(s,"for","input-phoneNumber"),r(i,"class","bg-gray-300 hover:bg-red-400 flex flex-col"),r(i,"type","text"),fe(t,"width","100%"),r(t,"class","pr-2"),r(u,"class","add-btn svelte-t3afc3"),r(e,"class","flex flex-row")},m($,w){C($,e,w),h(e,t),h(t,s),h(s,a),h(t,v),h(t,i),H(i,l[16]),h(e,n),h(e,u),d&&d.m(u,null),h(u,b),p&&p.m(u,null),I||(B=R(i,"input",U),I=!0)},p($,w){l=$,w&4&&i.value!==l[16]&&H(i,l[16]),l[18]!==l[2].length-1?d?d.p(l,w):(d=oe(l),d.c(),d.m(u,b)):d&&(d.d(1),d=null),l[18]===l[2].length-1?p?p.p(l,w):(p=ne(l),p.c(),p.m(u,null)):p&&(p.d(1),p=null)},d($){$&&f(e),d&&d.d(),p&&p.d(),I=!1,B()}}}function ke(l){let e;return{c(){e=z("Save")},l(t){e=M(t,"Save")},m(t,s){C(t,e,s)},d(t){t&&f(e)}}}function ae(l){let e,t;return e=new we({props:{color:"green",timeout:3e3,logic:l[9],$$slots:{icon:[ye],message:[Ee]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,a){ee(e,s,a),t=!0},p(s,a){const v={};a&524288&&(v.$$scope={dirty:a,ctx:s}),e.$set(v)},i(s){t||(q(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function Ee(l){let e,t;return{c(){e=j("span"),t=z("Edit successfull"),this.h()},l(s){e=N(s,"SPAN",{slot:!0,class:!0});var a=y(e);t=M(a,"Edit successfull"),a.forEach(f),this.h()},h(){r(e,"slot","message"),r(e,"class","text-xl")},m(s,a){C(s,e,a),h(e,t)},d(s){s&&f(e)}}}function ye(l){let e,t;return{c(){e=G("svg"),t=G("path"),this.h()},l(s){e=W(s,"svg",{slot:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var a=y(e);t=W(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(t).forEach(f),a.forEach(f),this.h()},h(){r(t,"stroke-linecap","round"),r(t,"stroke-linejoin","round"),r(t,"stroke-width","2"),r(t,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),r(e,"slot","icon"),r(e,"xmlns","http://www.w3.org/2000/svg"),r(e,"class","h-8 w-8 "),r(e,"fill","none"),r(e,"viewBox","0 0 24 24"),r(e,"stroke","currentColor")},m(s,a){C(s,e,a),h(e,t)},d(s){s&&f(e)}}}function je(l){let e,t,s,a=l[0].full_name+"",v,i,n,u,b,I,B,U,d,p,$,w,k,A,c,D,L,V,Y,K,O=l[2],E=[];for(let o=0;o<O.length;o+=1)E[o]=re(le(l,O,o));c=new be({props:{color:"blue",loading:l[4],$$slots:{default:[ke]},$$scope:{ctx:l}}}),c.$on("click",l[8]);let _=l[5]&&ae(l);return{c(){e=j("div"),t=j("h3"),s=z("Contacts: "),v=z(a),i=P(),n=j("div"),u=j("label"),b=z("Name..."),I=P(),B=j("input"),U=P();for(let o=0;o<E.length;o+=1)E[o].c();d=P(),p=j("label"),$=z("Email..."),w=P(),k=j("input"),A=P(),Z(c.$$.fragment),D=P(),_&&_.c(),L=se(),this.h()},l(o){e=N(o,"DIV",{class:!0});var g=y(e);t=N(g,"H3",{class:!0});var S=y(t);s=M(S,"Contacts: "),v=M(S,a),S.forEach(f),g.forEach(f),i=T(o),n=N(o,"DIV",{class:!0});var m=y(n);u=N(m,"LABEL",{class:!0,for:!0});var J=y(u);b=M(J,"Name..."),J.forEach(f),I=T(m),B=N(m,"INPUT",{class:!0,type:!0}),U=T(m);for(let F=0;F<E.length;F+=1)E[F].l(m);d=T(m),p=N(m,"LABEL",{class:!0,for:!0});var Q=y(p);$=M(Q,"Email..."),Q.forEach(f),w=T(m),k=N(m,"INPUT",{class:!0,type:!0}),A=T(m),x(c.$$.fragment,m),m.forEach(f),D=T(o),_&&_.l(o),L=se(),this.h()},h(){r(t,"class","ml-10"),r(e,"class","fixed inset-x-0 p-2 md:p-4 bg-gray-700 md:top-0 top-14 text-white text-lg md:pl-64 z-10"),r(u,"class",""),r(u,"for","input-name"),r(B,"class","bg-gray-300 hover:bg-red-400 flex flex-col"),r(B,"type","text"),r(p,"class",""),r(p,"for","input-email"),r(k,"class","bg-gray-300 hover:bg-red-400 flex flex-col"),r(k,"type","text"),r(n,"class","section md:mt-32 mt-20")},m(o,g){C(o,e,g),h(e,t),h(t,s),h(t,v),C(o,i,g),C(o,n,g),h(n,u),h(u,b),h(n,I),h(n,B),H(B,l[1]),h(n,U);for(let S=0;S<E.length;S+=1)E[S].m(n,null);h(n,d),h(n,p),h(p,$),h(n,w),h(n,k),H(k,l[3]),h(n,A),ee(c,n,null),C(o,D,g),_&&_.m(o,g),C(o,L,g),V=!0,Y||(K=[R(B,"input",l[10]),R(k,"input",l[13])],Y=!0)},p(o,[g]){if((!V||g&1)&&a!==(a=o[0].full_name+"")&&pe(v,a),g&2&&B.value!==o[1]&&H(B,o[1]),g&196){O=o[2];let m;for(m=0;m<O.length;m+=1){const J=le(o,O,m);E[m]?E[m].p(J,g):(E[m]=re(J),E[m].c(),E[m].m(n,d))}for(;m<E.length;m+=1)E[m].d(1);E.length=O.length}g&8&&k.value!==o[3]&&H(k,o[3]);const S={};g&16&&(S.loading=o[4]),g&524288&&(S.$$scope={dirty:g,ctx:o}),c.$set(S),o[5]?_?(_.p(o,g),g&32&&q(_,1)):(_=ae(o),_.c(),q(_,1),_.m(L.parentNode,L)):_&&(ge(),X(_,1,1,()=>{_=null}),me())},i(o){V||(q(c.$$.fragment,o),q(_),V=!0)},o(o){X(c.$$.fragment,o),X(_),V=!1},d(o){o&&f(e),o&&f(i),o&&f(n),de(E,o),te(c),o&&f(D),_&&_.d(o),o&&f(L),Y=!1,_e(K)}}}const Se=async({page:l,fetch:e})=>{console.log(l);const t=await e(`/contacts/${l.params.slug}.json`);if(console.log(t),t.ok)return{props:{post:await(await t.json())[0]}};const{message:s}=await t.json();return{error:new Error(s)}};function Ne(l,e,t){let s,a=!1,v=!1,i=!1,{post:n}=e;if(console.log(n),typeof n.phone_numbers=="string"){let c=n.phone_numbers.split();n.phone_numbers=c}let u=n.full_name,b=n.phone_numbers,I=n.email;function B(){t(2,b=[...b,""])}function U(c){b.splice(c,1),t(2,b)}async function d(){let c=s,D=localStorage.getItem("token");console.log(D),D=JSON.parse(D),t(4,a=!0);try{const L=await fetch(`https://www.imajenation.co.zw/mydiary/wp-json/wp/v2/contact/${n.id}`,{method:"PUT",credentials:"include",headers:{"Content-type":"application/json",Authorization:"Bearer "+D},body:JSON.stringify(c)}),V=await L.json();console.log(V),L.ok?(console.log("res is okay"),console.log(V),t(5,i=!0),t(4,a=!1),v=!1):(console.log("res has an error"),t(4,a=!1))}catch(L){console.log("ERROR!!!: ",L),t(4,a=!1)}}let p=()=>{t(5,i=!1),ve(`/contacts/${n.slug}?acas=97097`)};function $(){u=this.value,t(1,u)}function w(c,D){c[D]=this.value,t(2,b)}const k=c=>{U(c)};function A(){I=this.value,t(3,I)}return l.$$set=c=>{"post"in c&&t(0,n=c.post)},l.$$.update=()=>{l.$$.dirty&14&&(s={title:u,full_name:u,phone_numbers:b,email:I,status:"publish"})},[n,u,b,I,a,i,B,U,d,p,$,w,k,A]}class Ce extends ie{constructor(e){super();ue(this,e,Ne,je,ce,{post:0})}}export{Ce as default,Se as load};
