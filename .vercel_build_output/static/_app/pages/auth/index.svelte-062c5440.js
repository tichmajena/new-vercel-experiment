import{S as e,i as t,s as r,e as n,k as s,c as l,n as a,b as o,E as c,f as i,X as d,G as u,d as h,I as p,t as f,a as m,g,F as v,D as b,Z as w,h as k,l as x,R as y,ak as E,T as A,U as I,H as N}from"../../chunks/vendor-3cb4ad3c.js";function T(e){let t,r,f,m,g;return{c(){t=n("input"),r=s(),f=n("input"),this.h()},l(e){t=l(e,"INPUT",{class:!0,placeholder:!0,type:!0}),r=a(e),f=l(e,"INPUT",{class:!0,placeholder:!0,type:!0}),this.h()},h(){o(t,"class","w-full rounded mb-5"),o(t,"placeholder","Display Name"),o(t,"type","text"),c(t,"border-red-700",!0===e[0]),c(t,"bg-red-200",!0===e[0]),o(f,"class","w-full rounded mb-5"),o(f,"placeholder","Email"),o(f,"type","text"),c(f,"border-red-700",!0===e[0]),c(f,"bg-red-200",!0===e[0])},m(n,s){i(n,t,s),d(t,e[6]),i(n,r,s),i(n,f,s),d(f,e[7]),m||(g=[u(t,"input",e[16]),u(f,"input",e[17])],m=!0)},p(e,r){64&r&&t.value!==e[6]&&d(t,e[6]),1&r&&c(t,"border-red-700",!0===e[0]),1&r&&c(t,"bg-red-200",!0===e[0]),128&r&&f.value!==e[7]&&d(f,e[7]),1&r&&c(f,"border-red-700",!0===e[0]),1&r&&c(f,"bg-red-200",!0===e[0])},d(e){e&&h(t),e&&h(r),e&&h(f),m=!1,p(g)}}}function j(e){let t,r;return{c(){t=n("span"),r=f("Error, I think pane zvaitika"),this.h()},l(e){t=l(e,"SPAN",{class:!0});var n=m(t);r=g(n,"Error, I think pane zvaitika"),n.forEach(h),this.h()},h(){o(t,"class","text-red-700 block mb-5")},m(e,n){i(e,t,n),v(t,r)},d(e){e&&h(t)}}}function L(e){let t,r,s;function a(e,t){return e[3]?R:P}let d=a(e),p=d(e);return{c(){t=n("button"),p.c(),this.h()},l(e){t=l(e,"BUTTON",{class:!0});var r=m(t);p.l(r),r.forEach(h),this.h()},h(){o(t,"class","px-6 py-2 text-white rounded hover:bg-pink-500"),c(t,"bg-pink-700",!e[3]),c(t,"bg-pink-300",e[3])},m(n,l){i(n,t,l),p.m(t,null),r||(s=u(t,"click",e[12]),r=!0)},p(e,r){d!==(d=a(e))&&(p.d(1),p=d(e),p&&(p.c(),p.m(t,null))),8&r&&c(t,"bg-pink-700",!e[3]),8&r&&c(t,"bg-pink-300",e[3])},d(e){e&&h(t),p.d(),r=!1,s()}}}function D(e){let t,r,s;function a(e,t){return e[3]?V:U}let d=a(e),p=d(e);return{c(){t=n("button"),p.c(),this.h()},l(e){t=l(e,"BUTTON",{class:!0});var r=m(t);p.l(r),r.forEach(h),this.h()},h(){o(t,"class","px-6 py-2 text-white rounded hover:bg-pink-500"),c(t,"bg-pink-700",!e[3]),c(t,"bg-pink-300",e[3])},m(n,l){i(n,t,l),p.m(t,null),r||(s=u(t,"click",e[10]),r=!0)},p(e,r){d!==(d=a(e))&&(p.d(1),p=d(e),p&&(p.c(),p.m(t,null))),8&r&&c(t,"bg-pink-700",!e[3]),8&r&&c(t,"bg-pink-300",e[3])},d(e){e&&h(t),p.d(),r=!1,s()}}}function P(e){let t;return{c(){t=f("Register")},l(e){t=g(e,"Register")},m(e,r){i(e,t,r)},d(e){e&&h(t)}}}function R(e){let t;return{c(){t=f("...")},l(e){t=g(e,"...")},m(e,r){i(e,t,r)},d(e){e&&h(t)}}}function U(e){let t;return{c(){t=f("Login")},l(e){t=g(e,"Login")},m(e,r){i(e,t,r)},d(e){e&&h(t)}}}function V(e){let t;return{c(){t=f("...")},l(e){t=g(e,"...")},m(e,r){i(e,t,r)},d(e){e&&h(t)}}}function S(e){let t,r,s,a,c;return{c(){t=f("Already have an Account?\r\n    "),r=n("a"),s=f("Login"),this.h()},l(e){t=g(e,"Already have an Account?\r\n    "),r=l(e,"A",{href:!0});var n=m(r);s=g(n,"Login"),n.forEach(h),this.h()},h(){o(r,"href","")},m(n,l){i(n,t,l),i(n,r,l),v(r,s),a||(c=u(r,"click",e[14]),a=!0)},p:N,d(e){e&&h(t),e&&h(r),a=!1,c()}}}function B(e){let t,r,s,a,c;return{c(){t=f("Don't have an Account?\r\n    "),r=n("a"),s=f("Register"),this.h()},l(e){t=g(e,"Don't have an Account?\r\n    "),r=l(e,"A",{href:!0});var n=m(r);s=g(n,"Register"),n.forEach(h),this.h()},h(){o(r,"href","")},m(n,l){i(n,t,l),i(n,r,l),v(r,s),a||(c=u(r,"click",e[13]),a=!0)},p:N,d(e){e&&h(t),e&&h(r),a=!1,c()}}}function C(e){let t,r,c,d,u,p,k,x,y,E;return{c(){t=n("div"),r=n("div"),c=b("svg"),d=b("path"),u=s(),p=n("span"),k=f("Login successfull"),this.h()},l(e){t=l(e,"DIV",{class:!0});var n=m(t);r=l(n,"DIV",{class:!0});var s=m(r);c=l(s,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var o=m(c);d=l(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),m(d).forEach(h),o.forEach(h),s.forEach(h),u=a(n),p=l(n,"SPAN",{class:!0});var i=m(p);k=g(i,"Login successfull"),i.forEach(h),n.forEach(h),this.h()},h(){o(d,"stroke-linecap","round"),o(d,"stroke-linejoin","round"),o(d,"stroke-width","2"),o(d,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),o(c,"xmlns","http://www.w3.org/2000/svg"),o(c,"class","h-8 w-8 "),o(c,"fill","none"),o(c,"viewBox","0 0 24 24"),o(c,"stroke","currentColor"),o(r,"class","p-2 border-green-700 border-2 mr-3 rounded-full flex justify-center items-center"),o(p,"class","text-xl"),o(t,"class","flex items-center justify-center mx-auto md:max-w-md w-full bg-green-100 rounded mb-16 shadow-lg text text-green-600 p-5")},m(n,s){i(n,t,s),v(t,r),v(r,c),v(c,d),v(t,u),v(t,p),v(p,k),y||(E=w(x=e[11].call(null,t)),y=!0)},d(e){e&&h(t),y=!1,E()}}}function O(e){let t,r,c,d,u,p,w,x;return{c(){t=n("div"),r=n("div"),c=b("svg"),d=b("path"),u=s(),p=n("span"),w=f("An Error has occured: "),x=f(e[2]),this.h()},l(n){t=l(n,"DIV",{class:!0});var s=m(t);r=l(s,"DIV",{class:!0});var o=m(r);c=l(o,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var i=m(c);d=l(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),m(d).forEach(h),i.forEach(h),o.forEach(h),u=a(s),p=l(s,"SPAN",{class:!0});var f=m(p);w=g(f,"An Error has occured: "),x=g(f,e[2]),f.forEach(h),s.forEach(h),this.h()},h(){o(d,"stroke-linecap","round"),o(d,"stroke-linejoin","round"),o(d,"stroke-width","2"),o(d,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),o(c,"xmlns","http://www.w3.org/2000/svg"),o(c,"class","h-8 w-8 "),o(c,"fill","none"),o(c,"viewBox","0 0 24 24"),o(c,"stroke","currentColor"),o(r,"class","p-2 border-red-700 border-2 mr-3 rounded-full flex justify-center items-center"),o(p,"class","text-xl"),o(t,"class","flex items-center justify-center mx-auto md:max-w-md w-full bg-red-100 rounded mb-16 shadow-lg text text-red-600 p-5")},m(e,n){i(e,t,n),v(t,r),v(r,c),v(c,d),v(t,u),v(t,p),v(p,w),v(p,x)},p(e,t){4&t&&k(x,e[2])},d(e){e&&h(t)}}}function H(e){let t,r,b,w,k,N,P,R,U,V,H,M,z,J,F,G,W,X,Y,Z,q=!e[8]&&T(e),K=!0===e[0]&&j();function Q(e,t){return e[8]?D:L}let $=Q(e),_=$(e);function ee(e,t){return e[8]?B:S}let te=ee(e),re=te(e),ne=e[1]&&C(e),se=e[0]&&O(e);return{c(){t=n("div"),r=n("h3"),b=f("Login"),w=s(),k=n("input"),N=s(),q&&q.c(),P=s(),R=n("input"),U=s(),K&&K.c(),V=s(),_.c(),z=s(),J=n("div"),re.c(),F=s(),ne&&ne.c(),G=s(),se&&se.c(),W=x(),this.h()},l(e){t=l(e,"DIV",{class:!0});var n=m(t);r=l(n,"H3",{class:!0});var s=m(r);b=g(s,"Login"),s.forEach(h),w=a(n),k=l(n,"INPUT",{class:!0,placeholder:!0,type:!0}),N=a(n),q&&q.l(n),P=a(n),R=l(n,"INPUT",{class:!0,placeholder:!0,type:!0}),U=a(n),K&&K.l(n),V=a(n),_.l(n),n.forEach(h),z=a(e),J=l(e,"DIV",{class:!0});var o=m(J);re.l(o),o.forEach(h),F=a(e),ne&&ne.l(e),G=a(e),se&&se.l(e),W=x(),this.h()},h(){o(r,"class","text-center text-2xl mb-5"),o(k,"class","w-full rounded mb-5"),o(k,"placeholder",e[9]),o(k,"type","text"),c(k,"border-red-700",!0===e[0]),c(k,"bg-red-200",!0===e[0]),o(R,"class","w-full rounded mb-5"),o(R,"placeholder","Password"),o(R,"type","password"),c(R,"border-red-700",!0===e[0]),c(R,"bg-red-200",!0===e[0]),o(t,"class","mx-auto p-5 md:max-w-md w-full bg-gray-100 rounded mb-16 shadow-lg"),o(J,"class","text-center")},m(n,s){i(n,t,s),v(t,r),v(r,b),v(t,w),v(t,k),d(k,e[4]),v(t,N),q&&q.m(t,null),v(t,P),v(t,R),d(R,e[5]),v(t,U),K&&K.m(t,null),v(t,V),_.m(t,null),i(n,z,s),i(n,J,s),re.m(J,null),i(n,F,s),ne&&ne.m(n,s),i(n,G,s),se&&se.m(n,s),i(n,W,s),X=!0,Y||(Z=[u(k,"input",e[15]),u(R,"input",e[18])],Y=!0)},p(e,[r]){(!X||512&r)&&o(k,"placeholder",e[9]),16&r&&k.value!==e[4]&&d(k,e[4]),1&r&&c(k,"border-red-700",!0===e[0]),1&r&&c(k,"bg-red-200",!0===e[0]),e[8]?q&&(q.d(1),q=null):q?q.p(e,r):(q=T(e),q.c(),q.m(t,P)),32&r&&R.value!==e[5]&&d(R,e[5]),1&r&&c(R,"border-red-700",!0===e[0]),1&r&&c(R,"bg-red-200",!0===e[0]),!0===e[0]?K||(K=j(),K.c(),K.m(t,V)):K&&(K.d(1),K=null),$===($=Q(e))&&_?_.p(e,r):(_.d(1),_=$(e),_&&(_.c(),_.m(t,null))),te===(te=ee(e))&&re?re.p(e,r):(re.d(1),re=te(e),re&&(re.c(),re.m(J,null))),e[1]?ne||(ne=C(e),ne.c(),ne.m(G.parentNode,G)):ne&&(ne.d(1),ne=null),e[0]?se?se.p(e,r):(se=O(e),se.c(),se.m(W.parentNode,W)):se&&(se.d(1),se=null)},i(e){X||(y((()=>{M&&M.end(1),H=A(t,I,{}),H.start()})),X=!0)},o(e){H&&H.invalidate(),M=E(t,I,{}),X=!1},d(e){e&&h(t),q&&q.d(),K&&K.d(),_.d(),e&&M&&M.end(),e&&h(z),e&&h(J),re.d(),e&&h(F),ne&&ne.d(e),e&&h(G),se&&se.d(e),e&&h(W),Y=!1,p(Z)}}}async function M({page:e,fetch:t,session:r,context:n}){return r?{status:302,redirect:"/"}:{}}function z(e,t,r){let n=!1,s=!1,l="",a=!1,o="",c="",i="",d="",u=!0,h="Username or Email";return[n,s,l,a,o,c,i,d,u,h,async function(){r(3,a=!0);let e={username:o,password:c};try{const t=await fetch("/auth/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});console.log(t);const o=await t.json();200===t.status?(console.log(t),console.log("res is okay"),console.log(o),r(0,n=!1),r(3,a=!1),r(1,s=!0),setTimeout((()=>{window.location="/"}),2001)):(r(0,n=!0),r(3,a=!1),r(2,l="Wabhaiza Email kana Password, hameno."))}catch(t){console.log("ERRRR"),console.error(t),r(0,n=!0),r(3,a=!1),r(2,l="Check Your Internet Connection")}},function(){setTimeout((()=>{r(1,s=!1)}),2e3)},async function(){let e={username:o,email:d,password:c,role:"author"};const t=await fetch("/auth/register",{method:"POST",body:JSON.stringify(e)}),r=await t.json();return console.log(r.body.message),{props:{data:r}}},function(){r(8,u=!1),r(9,h="Username")},function(){r(8,u=!0)},function(){o=this.value,r(4,o)},function(){i=this.value,r(6,i)},function(){d=this.value,r(7,d)},function(){c=this.value,r(5,c)}]}class J extends e{constructor(e){super(),t(this,e,z,H,r,{})}}export{J as default,M as load};
