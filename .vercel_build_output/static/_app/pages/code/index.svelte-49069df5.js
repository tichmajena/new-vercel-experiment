import{S as pe,i as ve,s as ge,j as Z,m as x,o as ee,x as F,u as q,v as te,e as k,k as P,t as J,c as b,a as p,d as c,n as U,g as Y,b as i,f as V,G as m,H as K,I as se,h as ke,D as X,E as Q,w as be,X as we,K as ne,A as $e,L,l as ae,r as Ee}from"../../chunks/vendor-52b416c4.js";import{c as R,d as H}from"../../chunks/store-18dbc89f.js";import je from"./OurButtons.svelte-b3ae2b8c.js";import{g as le}from"../../chunks/navigation-51b348a1.js";import{B as ie}from"../../chunks/index-4a09887f.js";import{s as De}from"../../chunks/offline-45ec2525.js";import"../../chunks/singletons-ff603286.js";function ce(o,t,e){const l=o.slice();return l[14]=t[e],l[16]=e,l}function Ne(o){let t;return{c(){t=J("Select")},l(e){t=Y(e,"Select")},m(e,l){V(e,t,l)},d(e){e&&c(t)}}}function Be(o){let t;return{c(){t=J("Unselect")},l(e){t=Y(e,"Unselect")},m(e,l){V(e,t,l)},d(e){e&&c(t)}}}function Ie(o){let t;function e(s,r){return s[0]?Be:Ne}let l=e(o),n=l(o);return{c(){n.c(),t=ae()},l(s){n.l(s),t=ae()},m(s,r){n.m(s,r),V(s,t,r)},p(s,r){l!==(l=e(s))&&(n.d(1),n=l(s),n&&(n.c(),n.m(t.parentNode,t)))},d(s){n.d(s),s&&c(t)}}}function fe(o){let t,e;return t=new ie({props:{loading:o[1],$$slots:{default:[ye]},$$scope:{ctx:o}}}),t.$on("click",o[10]),{c(){Z(t.$$.fragment)},l(l){x(t.$$.fragment,l)},m(l,n){ee(t,l,n),e=!0},p(l,n){const s={};n&2&&(s.loading=l[1]),n&131072&&(s.$$scope={dirty:n,ctx:l}),t.$set(s)},i(l){e||(F(t.$$.fragment,l),e=!0)},o(l){q(t.$$.fragment,l),e=!1},d(l){te(t,l)}}}function ye(o){let t;return{c(){t=J("Delete")},l(e){t=Y(e,"Delete")},m(e,l){V(e,t,l)},d(e){e&&c(t)}}}function ue(o){let t;return{c(){t=J("Please Press The Add Button To Create Your Notes!!!")},l(e){t=Y(e,"Please Press The Add Button To Create Your Notes!!!")},m(e,l){V(e,t,l)},d(e){e&&c(t)}}}function de(o){let t,e,l,n;return{c(){t=k("label"),e=k("input"),this.h()},l(s){t=b(s,"LABEL",{for:!0});var r=p(t);e=b(r,"INPUT",{id:!0,group:!0,type:!0}),r.forEach(c),this.h()},h(){i(e,"id",o[16]),i(e,"group",o[5]),e.value=o[16],i(e,"type","checkbox"),i(t,"for",o[16])},m(s,r){V(s,t,r),m(t,e),l||(n=K(e,"click",o[9]),l=!0)},p:se,d(s){s&&c(t),l=!1,n()}}}function he(o){let t,e,l,n,s,r,f=o[3][o[16]].title+"",g,y,C,I,S,d=o[0]&&de(o);function M(){return o[13](o[16])}return{c(){t=k("div"),e=k("div"),d&&d.c(),l=P(),n=k("div"),s=k("a"),r=k("h3"),g=J(f),C=P(),this.h()},l(w){t=b(w,"DIV",{class:!0});var h=p(t);e=b(h,"DIV",{class:!0});var u=p(e);d&&d.l(u),u.forEach(c),l=U(h),n=b(h,"DIV",{class:!0});var v=p(n);s=b(v,"A",{href:!0});var _=p(s);r=b(_,"H3",{class:!0});var O=p(r);g=Y(O,f),O.forEach(c),_.forEach(c),v.forEach(c),C=U(h),h.forEach(c),this.h()},h(){i(e,"class","w-1/12"),i(r,"class","text-lg ml-8 md:ml-10"),i(s,"href",y="/code/"+o[16]+"-"+o[14].id),i(n,"class","w-11/12"),i(t,"class","flex")},m(w,h){V(w,t,h),m(t,e),d&&d.m(e,null),m(t,l),m(t,n),m(n,s),m(s,r),m(r,g),m(t,C),I||(S=K(s,"click",M),I=!0)},p(w,h){o=w,o[0]?d?d.p(o,h):(d=de(o),d.c(),d.m(e,null)):d&&(d.d(1),d=null),h&8&&f!==(f=o[3][o[16]].title+"")&&ke(g,f),h&8&&y!==(y="/code/"+o[16]+"-"+o[14].id)&&i(s,"href",y)},d(w){w&&c(t),d&&d.d(),I=!1,S()}}}function me(o){let t,e,l,n,s;return{c(){t=k("button"),e=X("svg"),l=X("path"),this.h()},l(r){t=b(r,"BUTTON",{class:!0});var f=p(t);e=Q(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var g=p(e);l=Q(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(l).forEach(c),g.forEach(c),f.forEach(c),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-8 w-8"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(t,"class","text-white rounded-full h-14 w-14 bg-pink-700 grid place-items-center")},m(r,f){V(r,t,f),m(t,e),m(e,l),n||(s=K(t,"click",o[7]),n=!0)},p:se,d(r){r&&c(t),n=!1,s()}}}function _e(o){let t,e,l,n,s;return{c(){t=k("button"),e=X("svg"),l=X("path"),this.h()},l(r){t=b(r,"BUTTON",{class:!0});var f=p(t);e=Q(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var g=p(e);l=Q(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(l).forEach(c),g.forEach(c),f.forEach(c),this.h()},h(){i(l,"stroke-linecap","round"),i(l,"stroke-linejoin","round"),i(l,"stroke-width","2"),i(l,"d","M5 13l4 4L19 7"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-8 w-8"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor"),i(t,"class","text-white rounded-full h-14 w-14 bg-green-700 grid place-items-center")},m(r,f){V(r,t,f),m(t,e),m(e,l),n||(s=K(t,"click",o[8]),n=!0)},p:se,d(r){r&&c(t),n=!1,s()}}}function Ce(o){let t,e,l,n,s,r,f,g,y,C,I,S,d,M,w,h,u,v;f=new ie({props:{$$slots:{default:[Ie]},$$scope:{ctx:o}}}),f.$on("click",o[12]);let _=o[0]&&o[2].length>0&&fe(o),O=o[3],$=[];for(let a=0;a<O.length;a+=1)$[a]=he(ce(o,O,a));let E=null;O.length||(E=ue()),d=new je({});let j=!o[4].save&&!o[4].edit&&me(o),D=o[4].save&&_e(o);return{c(){t=k("div"),e=k("h3"),l=J("Code Notes"),n=P(),s=k("div"),r=k("div"),Z(f.$$.fragment),g=P(),_&&_.c(),y=P();for(let a=0;a<$.length;a+=1)$[a].c();E&&E.c(),C=P(),I=k("div"),S=k("div"),Z(d.$$.fragment),M=P(),w=k("div"),h=k("div"),j&&j.c(),u=P(),D&&D.c(),this.h()},l(a){t=b(a,"DIV",{class:!0});var N=p(t);e=b(N,"H3",{class:!0});var A=p(e);l=Y(A,"Code Notes"),A.forEach(c),N.forEach(c),n=U(a),s=b(a,"DIV",{class:!0});var B=p(s);r=b(B,"DIV",{class:!0});var T=p(r);x(f.$$.fragment,T),g=U(T),_&&_.l(T),y=U(T);for(let W=0;W<$.length;W+=1)$[W].l(T);E&&E.l(T),C=U(T),I=b(T,"DIV",{class:!0});var z=p(I);S=b(z,"DIV",{class:!0});var oe=p(S);x(d.$$.fragment,oe),oe.forEach(c),M=U(z),w=b(z,"DIV",{class:!0});var re=p(w);h=b(re,"DIV",{id:!0});var G=p(h);j&&j.l(G),u=U(G),D&&D.l(G),G.forEach(c),re.forEach(c),z.forEach(c),T.forEach(c),B.forEach(c),this.h()},h(){i(e,"class","ml-10"),i(t,"class","fixed inset-x-0 p-2 md:p-4 bg-gray-700 md:top-0 top-14 text-white text-lg md:pl-64 z-10"),i(S,"class","note-footer"),i(h,"id","add-btn"),i(w,"class","bottom-bar md:pl-64"),i(I,"class","app-wrapper"),i(r,"class","container mx-auto max-w-lg "),i(s,"class","section md:mt-32 mt-20")},m(a,N){V(a,t,N),m(t,e),m(e,l),V(a,n,N),V(a,s,N),m(s,r),ee(f,r,null),m(r,g),_&&_.m(r,null),m(r,y);for(let A=0;A<$.length;A+=1)$[A].m(r,null);E&&E.m(r,null),m(r,C),m(r,I),m(I,S),ee(d,S,null),m(I,M),m(I,w),m(w,h),j&&j.m(h,null),m(h,u),D&&D.m(h,null),v=!0},p(a,[N]){const A={};if(N&131073&&(A.$$scope={dirty:N,ctx:a}),f.$set(A),a[0]&&a[2].length>0?_?(_.p(a,N),N&5&&F(_,1)):(_=fe(a),_.c(),F(_,1),_.m(r,y)):_&&(Ee(),q(_,1,1,()=>{_=null}),be()),N&633){O=a[3];let B;for(B=0;B<O.length;B+=1){const T=ce(a,O,B);$[B]?$[B].p(T,N):($[B]=he(T),$[B].c(),$[B].m(r,C))}for(;B<$.length;B+=1)$[B].d(1);$.length=O.length,O.length?E&&(E.d(1),E=null):E||(E=ue(),E.c(),E.m(r,C))}!a[4].save&&!a[4].edit?j?j.p(a,N):(j=me(a),j.c(),j.m(h,u)):j&&(j.d(1),j=null),a[4].save?D?D.p(a,N):(D=_e(a),D.c(),D.m(h,null)):D&&(D.d(1),D=null)},i(a){v||(F(f.$$.fragment,a),F(_),F(d.$$.fragment,a),v=!0)},o(a){q(f.$$.fragment,a),q(_),q(d.$$.fragment,a),v=!1},d(a){a&&c(t),a&&c(n),a&&c(s),te(f),_&&_.d(),we($,a),E&&E.d(),te(d),j&&j.d(),D&&D.d()}}}const He=async({fetch:o,session:t})=>{if(!t)return{status:302,redirect:"/auth"};const e=await o("/code.json");if(e.ok){let n=(await e.json()).map(s=>{let r=JSON.parse(s.string);return r.id=s.id,r});return R.set(n),{}}return{}};function Te(o,t,e){let l,n,s;ne(o,R,u=>e(3,n=u)),ne(o,H,u=>e(4,s=u));let r=[],f,g,y=!1;$e(()=>{n.forEach((u,v)=>{De(`${v}-${u.id}`)})});function C(){n.forEach(u=>{u.edit=!1,u.ready=!1,u.steps.length>0&&u.steps.forEach(v=>{v.editDesc=!1,v.editCode=!1})})}function I(){let u={title:"",steps:[],edit:!0,ready:!0,mode:"draft"};L(R,n=[...n,u],n),L(H,s.showFabs=!0,s),L(H,s.save=!0,s),L(H,s.edit=!1,s);let v=n.length-1;le("/code/"+v)}function S(){L(H,s.save=!1,s),le("/code/")}L(H,s.save=!1,s);function d(u){console.log(f);let v=+u.srcElement.id;e(11,r=[...r,n[v].id])}function M(){e(1,y=!0),r.forEach(async u=>{console.log("trashing:",u);const v=await fetch(`/code/${u}.json`,{method:"DELETE",body:JSON.stringify({status:"trash"})});v.ok&&(e(1,y=!1),le("/code",{invalidate:!0})),await v.json()})}const w=()=>{e(0,g=!g)},h=u=>{C(),L(R,n[u].ready=!0,n),L(H,s.edit=!0,s),L(H,s.showFabs=!0,s)};return o.$$.update=()=>{o.$$.dirty&2048&&e(2,l=r)},[g,y,l,n,s,f,C,I,S,d,M,r,w,h]}class Me extends pe{constructor(t){super();ve(this,t,Te,Ce,ge,{})}}export{Me as default,He as load};
