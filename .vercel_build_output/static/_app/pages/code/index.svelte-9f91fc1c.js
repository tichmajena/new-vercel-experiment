import{S as t,i as e,s,j as l,m as a,o as n,x as r,u as o,v as c,e as i,k as d,t as h,c as f,a as u,d as m,n as p,g,b as v,f as $,F as w,G as k,H as E,h as x,D as j,w as b,W as D,J as y,A as B,K as I,l as N,r as T}from"../../chunks/vendor-233f8ef4.js";import{c as V,d as C}from"../../chunks/store-098d49d4.js";import A from"./OurButtons.svelte-8312a9cc.js";import{g as O}from"../../chunks/navigation-e6c17f3a.js";import{B as P}from"../../chunks/index-a7651b31.js";import{s as S}from"../../chunks/offline-45ec2525.js";import"../../chunks/singletons-ff603286.js";function U(t,e,s){const l=t.slice();return l[14]=e[s],l[16]=s,l}function H(t){let e;return{c(){e=h("Select")},l(t){e=g(t,"Select")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function L(t){let e;return{c(){e=h("Unselect")},l(t){e=g(t,"Unselect")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function F(t){let e;function s(t,e){return t[0]?L:H}let l=s(t),a=l(t);return{c(){a.c(),e=N()},l(t){a.l(t),e=N()},m(t,s){a.m(t,s),$(t,e,s)},p(t,n){l!==(l=s(t))&&(a.d(1),a=l(t),a&&(a.c(),a.m(e.parentNode,e)))},d(t){a.d(t),t&&m(e)}}}function J(t){let e,s;return e=new P({props:{loading:t[1],$$slots:{default:[M]},$$scope:{ctx:t}}}),e.$on("click",t[10]),{c(){l(e.$$.fragment)},l(t){a(e.$$.fragment,t)},m(t,l){n(e,t,l),s=!0},p(t,s){const l={};2&s&&(l.loading=t[1]),131072&s&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){s||(r(e.$$.fragment,t),s=!0)},o(t){o(e.$$.fragment,t),s=!1},d(t){c(e,t)}}}function M(t){let e;return{c(){e=h("Delete")},l(t){e=g(t,"Delete")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function Y(t){let e;return{c(){e=h("Please Press The Add Button To Create Your Notes!!!")},l(t){e=g(t,"Please Press The Add Button To Create Your Notes!!!")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function z(t){let e,s,l,a;return{c(){e=i("label"),s=i("input"),this.h()},l(t){e=f(t,"LABEL",{for:!0});var l=u(e);s=f(l,"INPUT",{id:!0,group:!0,type:!0}),l.forEach(m),this.h()},h(){v(s,"id",t[16]),v(s,"group",t[5]),s.value=t[16],v(s,"type","checkbox"),v(e,"for",t[16])},m(n,r){$(n,e,r),w(e,s),l||(a=k(s,"click",t[9]),l=!0)},p:E,d(t){t&&m(e),l=!1,a()}}}function G(t){let e,s,l,a,n,r,o,c,E,j,b,D=t[3][t[16]].title+"",y=t[0]&&z(t);function B(){return t[13](t[16])}return{c(){e=i("div"),s=i("div"),y&&y.c(),l=d(),a=i("div"),n=i("a"),r=i("h3"),o=h(D),E=d(),this.h()},l(t){e=f(t,"DIV",{class:!0});var c=u(e);s=f(c,"DIV",{class:!0});var i=u(s);y&&y.l(i),i.forEach(m),l=p(c),a=f(c,"DIV",{class:!0});var d=u(a);n=f(d,"A",{href:!0});var h=u(n);r=f(h,"H3",{class:!0});var v=u(r);o=g(v,D),v.forEach(m),h.forEach(m),d.forEach(m),E=p(c),c.forEach(m),this.h()},h(){v(s,"class","w-1/12"),v(r,"class","text-lg ml-8 md:ml-10"),v(n,"href",c="/code/"+t[16]+"-"+t[14].id),v(a,"class","w-11/12"),v(e,"class","flex")},m(t,c){$(t,e,c),w(e,s),y&&y.m(s,null),w(e,l),w(e,a),w(a,n),w(n,r),w(r,o),w(e,E),j||(b=k(n,"click",B),j=!0)},p(e,l){(t=e)[0]?y?y.p(t,l):(y=z(t),y.c(),y.m(s,null)):y&&(y.d(1),y=null),8&l&&D!==(D=t[3][t[16]].title+"")&&x(o,D),8&l&&c!==(c="/code/"+t[16]+"-"+t[14].id)&&v(n,"href",c)},d(t){t&&m(e),y&&y.d(),j=!1,b()}}}function K(t){let e,s,l,a,n;return{c(){e=i("button"),s=j("svg"),l=j("path"),this.h()},l(t){e=f(t,"BUTTON",{class:!0});var a=u(e);s=f(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var n=u(s);l=f(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),u(l).forEach(m),n.forEach(m),a.forEach(m),this.h()},h(){v(l,"stroke-linecap","round"),v(l,"stroke-linejoin","round"),v(l,"stroke-width","2"),v(l,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"class","h-8 w-8"),v(s,"fill","none"),v(s,"viewBox","0 0 24 24"),v(s,"stroke","currentColor"),v(e,"class","text-white rounded-full h-14 w-14 bg-pink-700 grid place-items-center")},m(r,o){$(r,e,o),w(e,s),w(s,l),a||(n=k(e,"click",t[7]),a=!0)},p:E,d(t){t&&m(e),a=!1,n()}}}function W(t){let e,s,l,a,n;return{c(){e=i("button"),s=j("svg"),l=j("path"),this.h()},l(t){e=f(t,"BUTTON",{class:!0});var a=u(e);s=f(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var n=u(s);l=f(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),u(l).forEach(m),n.forEach(m),a.forEach(m),this.h()},h(){v(l,"stroke-linecap","round"),v(l,"stroke-linejoin","round"),v(l,"stroke-width","2"),v(l,"d","M5 13l4 4L19 7"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"class","h-8 w-8"),v(s,"fill","none"),v(s,"viewBox","0 0 24 24"),v(s,"stroke","currentColor"),v(e,"class","text-white rounded-full h-14 w-14 bg-green-700 grid place-items-center")},m(r,o){$(r,e,o),w(e,s),w(s,l),a||(n=k(e,"click",t[8]),a=!0)},p:E,d(t){t&&m(e),a=!1,n()}}}function q(t){let e,s,k,E,x,j,y,B,I,N,V,C,O,S,H,L,M,z;y=new P({props:{$$slots:{default:[F]},$$scope:{ctx:t}}}),y.$on("click",t[12]);let q=t[0]&&t[2].length>0&&J(t),Q=t[3],R=[];for(let l=0;l<Q.length;l+=1)R[l]=G(U(t,Q,l));let X=null;Q.length||(X=Y()),O=new A({});let Z=!t[4].save&&!t[4].edit&&K(t),_=t[4].save&&W(t);return{c(){e=i("div"),s=i("h3"),k=h("Code Notes"),E=d(),x=i("div"),j=i("div"),l(y.$$.fragment),B=d(),q&&q.c(),I=d();for(let t=0;t<R.length;t+=1)R[t].c();X&&X.c(),N=d(),V=i("div"),C=i("div"),l(O.$$.fragment),S=d(),H=i("div"),L=i("div"),Z&&Z.c(),M=d(),_&&_.c(),this.h()},l(t){e=f(t,"DIV",{class:!0});var l=u(e);s=f(l,"H3",{class:!0});var n=u(s);k=g(n,"Code Notes"),n.forEach(m),l.forEach(m),E=p(t),x=f(t,"DIV",{class:!0});var r=u(x);j=f(r,"DIV",{class:!0});var o=u(j);a(y.$$.fragment,o),B=p(o),q&&q.l(o),I=p(o);for(let e=0;e<R.length;e+=1)R[e].l(o);X&&X.l(o),N=p(o),V=f(o,"DIV",{class:!0});var c=u(V);C=f(c,"DIV",{class:!0});var i=u(C);a(O.$$.fragment,i),i.forEach(m),S=p(c),H=f(c,"DIV",{class:!0});var d=u(H);L=f(d,"DIV",{id:!0});var h=u(L);Z&&Z.l(h),M=p(h),_&&_.l(h),h.forEach(m),d.forEach(m),c.forEach(m),o.forEach(m),r.forEach(m),this.h()},h(){v(s,"class","ml-10"),v(e,"class","fixed inset-x-0 p-2 md:p-4 bg-gray-700 md:top-0 top-14 text-white text-lg md:pl-64 z-10"),v(C,"class","note-footer"),v(L,"id","add-btn"),v(H,"class","bottom-bar md:pl-64"),v(V,"class","app-wrapper"),v(j,"class","container mx-auto max-w-lg "),v(x,"class","section md:mt-32 mt-20")},m(t,l){$(t,e,l),w(e,s),w(s,k),$(t,E,l),$(t,x,l),w(x,j),n(y,j,null),w(j,B),q&&q.m(j,null),w(j,I);for(let e=0;e<R.length;e+=1)R[e].m(j,null);X&&X.m(j,null),w(j,N),w(j,V),w(V,C),n(O,C,null),w(V,S),w(V,H),w(H,L),Z&&Z.m(L,null),w(L,M),_&&_.m(L,null),z=!0},p(t,[e]){const s={};if(131073&e&&(s.$$scope={dirty:e,ctx:t}),y.$set(s),t[0]&&t[2].length>0?q?(q.p(t,e),5&e&&r(q,1)):(q=J(t),q.c(),r(q,1),q.m(j,I)):q&&(T(),o(q,1,1,(()=>{q=null})),b()),633&e){let s;for(Q=t[3],s=0;s<Q.length;s+=1){const l=U(t,Q,s);R[s]?R[s].p(l,e):(R[s]=G(l),R[s].c(),R[s].m(j,N))}for(;s<R.length;s+=1)R[s].d(1);R.length=Q.length,Q.length?X&&(X.d(1),X=null):X||(X=Y(),X.c(),X.m(j,N))}t[4].save||t[4].edit?Z&&(Z.d(1),Z=null):Z?Z.p(t,e):(Z=K(t),Z.c(),Z.m(L,M)),t[4].save?_?_.p(t,e):(_=W(t),_.c(),_.m(L,null)):_&&(_.d(1),_=null)},i(t){z||(r(y.$$.fragment,t),r(q),r(O.$$.fragment,t),z=!0)},o(t){o(y.$$.fragment,t),o(q),o(O.$$.fragment,t),z=!1},d(t){t&&m(e),t&&m(E),t&&m(x),c(y),q&&q.d(),D(R,t),X&&X.d(),c(O),Z&&Z.d(),_&&_.d()}}}const Q=async({fetch:t,session:e})=>{if(!e)return{status:302,redirect:"/auth"};const s=await t("/code.json");if(s.ok){let t=(await s.json()).map((t=>{let e=JSON.parse(t.string);return e.id=t.id,e}));return V.set(t),{}}return{}};function R(t,e,s){let l,a,n;y(t,V,(t=>s(3,a=t))),y(t,C,(t=>s(4,n=t)));let r,o,c=[],i=!1;function d(){a.forEach((t=>{t.edit=!1,t.ready=!1,t.steps.length>0&&t.steps.forEach((t=>{t.editDesc=!1,t.editCode=!1}))}))}B((()=>{a.forEach(((t,e)=>{S(`${e}-${t.id}`)}))})),I(C,n.save=!1,n);return t.$$.update=()=>{2048&t.$$.dirty&&s(2,l=c)},[o,i,l,a,n,r,d,function(){I(V,a=[...a,{title:"",steps:[],edit:!0,ready:!0,mode:"draft"}],a),I(C,n.showFabs=!0,n),I(C,n.save=!0,n),I(C,n.edit=!1,n);let t=a.length-1;O("/code/"+t)},function(){I(C,n.save=!1,n),O("/code/")},function(t){console.log(r);let e=+t.srcElement.id;s(11,c=[...c,a[e].id])},function(){s(1,i=!0),c.forEach((async t=>{console.log("trashing:",t);const e=await fetch(`/code/${t}.json`,{method:"DELETE",body:JSON.stringify({status:"trash"})});e.ok&&(s(1,i=!1),O("/code",{invalidate:!0})),await e.json()}))},c,()=>{s(0,o=!o)},t=>{d(),I(V,a[t].ready=!0,a),I(C,n.edit=!0,n),I(C,n.showFabs=!0,n)}]}class X extends t{constructor(t){super(),e(this,t,R,q,s,{})}}export{X as default,Q as load};
