import{S as t,i as e,s,j as l,m as n,o,v as r,r as a,w as c,e as i,k as d,t as h,c as f,a as u,d as m,n as p,g,b as v,f as $,F as w,G as k,H as E,h as x,D as b,u as j,U as D,J as y,K as B,l as I,B as N}from"../../chunks/vendor-d62291b3.js";import{c as T,d as V}from"../../chunks/store-0291cfd6.js";import C from"./OurButtons.svelte-5689548c.js";import{g as U}from"../../chunks/navigation-0819b7b8.js";import{B as O}from"../../chunks/index-130bfc23.js";import"../../chunks/singletons-9c431dc7.js";function P(t,e,s){const l=t.slice();return l[14]=e[s],l[16]=s,l}function S(t){let e;return{c(){e=h("Select")},l(t){e=g(t,"Select")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function A(t){let e;return{c(){e=h("Unselect")},l(t){e=g(t,"Unselect")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function H(t){let e;function s(t,e){return t[0]?A:S}let l=s(t),n=l(t);return{c(){n.c(),e=I()},l(t){n.l(t),e=I()},m(t,s){n.m(t,s),$(t,e,s)},p(t,o){l!==(l=s(t))&&(n.d(1),n=l(t),n&&(n.c(),n.m(e.parentNode,e)))},d(t){n.d(t),t&&m(e)}}}function L(t){let e,s;return e=new O({props:{loading:t[1],$$slots:{default:[F]},$$scope:{ctx:t}}}),e.$on("click",t[10]),{c(){l(e.$$.fragment)},l(t){n(e.$$.fragment,t)},m(t,l){o(e,t,l),s=!0},p(t,s){const l={};2&s&&(l.loading=t[1]),131072&s&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){s||(r(e.$$.fragment,t),s=!0)},o(t){a(e.$$.fragment,t),s=!1},d(t){c(e,t)}}}function F(t){let e;return{c(){e=h("Delete")},l(t){e=g(t,"Delete")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function J(t){let e;return{c(){e=h("Please Press The Add Button To Create Your Notes!!!")},l(t){e=g(t,"Please Press The Add Button To Create Your Notes!!!")},m(t,s){$(t,e,s)},d(t){t&&m(e)}}}function M(t){let e,s,l,n;return{c(){e=i("label"),s=i("input"),this.h()},l(t){e=f(t,"LABEL",{for:!0});var l=u(e);s=f(l,"INPUT",{id:!0,group:!0,type:!0}),l.forEach(m),this.h()},h(){v(s,"id",t[16]),v(s,"group",t[5]),s.value=t[16],v(s,"type","checkbox"),v(e,"for",t[16])},m(o,r){$(o,e,r),w(e,s),l||(n=k(s,"click",t[9]),l=!0)},p:E,d(t){t&&m(e),l=!1,n()}}}function Y(t){let e,s,l,n,o,r,a,c,E,b,j=t[3][t[16]].title+"",D=t[0]&&M(t);function y(){return t[13](t[16])}return{c(){e=i("div"),s=i("div"),D&&D.c(),l=d(),n=i("div"),o=i("a"),r=i("h3"),a=h(j),this.h()},l(t){e=f(t,"DIV",{class:!0});var c=u(e);s=f(c,"DIV",{class:!0});var i=u(s);D&&D.l(i),i.forEach(m),l=p(c),n=f(c,"DIV",{class:!0});var d=u(n);o=f(d,"A",{"sveltekit:prefetch":!0,href:!0});var h=u(o);r=f(h,"H3",{class:!0});var v=u(r);a=g(v,j),v.forEach(m),h.forEach(m),d.forEach(m),c.forEach(m),this.h()},h(){v(s,"class","w-1/12"),v(r,"class","text-lg ml-8 md:ml-10"),v(o,"sveltekit:prefetch",""),v(o,"href",c="/code/"+t[16]+"-"+t[14].id),v(n,"class","w-11/12"),v(e,"class","flex")},m(t,c){$(t,e,c),w(e,s),D&&D.m(s,null),w(e,l),w(e,n),w(n,o),w(o,r),w(r,a),E||(b=k(o,"click",y),E=!0)},p(e,l){(t=e)[0]?D?D.p(t,l):(D=M(t),D.c(),D.m(s,null)):D&&(D.d(1),D=null),8&l&&j!==(j=t[3][t[16]].title+"")&&x(a,j),8&l&&c!==(c="/code/"+t[16]+"-"+t[14].id)&&v(o,"href",c)},d(t){t&&m(e),D&&D.d(),E=!1,b()}}}function z(t){let e,s,l,n,o;return{c(){e=i("button"),s=b("svg"),l=b("path"),this.h()},l(t){e=f(t,"BUTTON",{class:!0});var n=u(e);s=f(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var o=u(s);l=f(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),u(l).forEach(m),o.forEach(m),n.forEach(m),this.h()},h(){v(l,"stroke-linecap","round"),v(l,"stroke-linejoin","round"),v(l,"stroke-width","2"),v(l,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"class","h-8 w-8"),v(s,"fill","none"),v(s,"viewBox","0 0 24 24"),v(s,"stroke","currentColor"),v(e,"class","text-white rounded-full h-14 w-14 bg-pink-700 grid place-items-center")},m(r,a){$(r,e,a),w(e,s),w(s,l),n||(o=k(e,"click",t[7]),n=!0)},p:E,d(t){t&&m(e),n=!1,o()}}}function G(t){let e,s,l,n,o;return{c(){e=i("button"),s=b("svg"),l=b("path"),this.h()},l(t){e=f(t,"BUTTON",{class:!0});var n=u(e);s=f(n,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var o=u(s);l=f(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),u(l).forEach(m),o.forEach(m),n.forEach(m),this.h()},h(){v(l,"stroke-linecap","round"),v(l,"stroke-linejoin","round"),v(l,"stroke-width","2"),v(l,"d","M5 13l4 4L19 7"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"class","h-8 w-8"),v(s,"fill","none"),v(s,"viewBox","0 0 24 24"),v(s,"stroke","currentColor"),v(e,"class","text-white rounded-full h-14 w-14 bg-green-700 grid place-items-center")},m(r,a){$(r,e,a),w(e,s),w(s,l),n||(o=k(e,"click",t[8]),n=!0)},p:E,d(t){t&&m(e),n=!1,o()}}}function K(t){let e,s,k,E,x,b,y,B,I,T,V,U,S,A,F,M,K,q;y=new O({props:{$$slots:{default:[H]},$$scope:{ctx:t}}}),y.$on("click",t[12]);let Q=t[0]&&t[2].length>0&&L(t),R=t[3],W=[];for(let l=0;l<R.length;l+=1)W[l]=Y(P(t,R,l));let X=null;R.length||(X=J()),S=new C({});let Z=!t[4].save&&!t[4].edit&&z(t),_=t[4].save&&G(t);return{c(){e=i("div"),s=i("h3"),k=h("Code Notes"),E=d(),x=i("div"),b=i("div"),l(y.$$.fragment),B=d(),Q&&Q.c(),I=d();for(let t=0;t<W.length;t+=1)W[t].c();X&&X.c(),T=d(),V=i("div"),U=i("div"),l(S.$$.fragment),A=d(),F=i("div"),M=i("div"),Z&&Z.c(),K=d(),_&&_.c(),this.h()},l(t){e=f(t,"DIV",{class:!0});var l=u(e);s=f(l,"H3",{class:!0});var o=u(s);k=g(o,"Code Notes"),o.forEach(m),l.forEach(m),E=p(t),x=f(t,"DIV",{class:!0});var r=u(x);b=f(r,"DIV",{class:!0});var a=u(b);n(y.$$.fragment,a),B=p(a),Q&&Q.l(a),I=p(a);for(let e=0;e<W.length;e+=1)W[e].l(a);X&&X.l(a),T=p(a),V=f(a,"DIV",{class:!0});var c=u(V);U=f(c,"DIV",{class:!0});var i=u(U);n(S.$$.fragment,i),i.forEach(m),A=p(c),F=f(c,"DIV",{class:!0});var d=u(F);M=f(d,"DIV",{id:!0});var h=u(M);Z&&Z.l(h),K=p(h),_&&_.l(h),h.forEach(m),d.forEach(m),c.forEach(m),a.forEach(m),r.forEach(m),this.h()},h(){v(s,"class","ml-10"),v(e,"class","fixed inset-x-0 p-2 md:p-4 bg-gray-700 md:top-0 top-14 text-white text-lg md:pl-64 z-10"),v(U,"class","note-footer"),v(M,"id","add-btn"),v(F,"class","bottom-bar md:pl-64"),v(V,"class","app-wrapper"),v(b,"class","container mx-auto max-w-lg "),v(x,"class","section md:mt-32 mt-20")},m(t,l){$(t,e,l),w(e,s),w(s,k),$(t,E,l),$(t,x,l),w(x,b),o(y,b,null),w(b,B),Q&&Q.m(b,null),w(b,I);for(let e=0;e<W.length;e+=1)W[e].m(b,null);X&&X.m(b,null),w(b,T),w(b,V),w(V,U),o(S,U,null),w(V,A),w(V,F),w(F,M),Z&&Z.m(M,null),w(M,K),_&&_.m(M,null),q=!0},p(t,[e]){const s={};if(131073&e&&(s.$$scope={dirty:e,ctx:t}),y.$set(s),t[0]&&t[2].length>0?Q?(Q.p(t,e),5&e&&r(Q,1)):(Q=L(t),Q.c(),r(Q,1),Q.m(b,I)):Q&&(N(),a(Q,1,1,(()=>{Q=null})),j()),633&e){let s;for(R=t[3],s=0;s<R.length;s+=1){const l=P(t,R,s);W[s]?W[s].p(l,e):(W[s]=Y(l),W[s].c(),W[s].m(b,T))}for(;s<W.length;s+=1)W[s].d(1);W.length=R.length,R.length?X&&(X.d(1),X=null):X||(X=J(),X.c(),X.m(b,T))}t[4].save||t[4].edit?Z&&(Z.d(1),Z=null):Z?Z.p(t,e):(Z=z(t),Z.c(),Z.m(M,K)),t[4].save?_?_.p(t,e):(_=G(t),_.c(),_.m(M,null)):_&&(_.d(1),_=null)},i(t){q||(r(y.$$.fragment,t),r(Q),r(S.$$.fragment,t),q=!0)},o(t){a(y.$$.fragment,t),a(Q),a(S.$$.fragment,t),q=!1},d(t){t&&m(e),t&&m(E),t&&m(x),c(y),Q&&Q.d(),D(W,t),X&&X.d(),c(S),Z&&Z.d(),_&&_.d()}}}const q=async({fetch:t,session:e})=>{if(!e)return{status:302,redirect:"/auth"};const s=await t("/code.json");if(s.ok){let t=(await s.json()).map((t=>{let e=JSON.parse(t.string);return e.id=t.id,e}));return T.set(t),{}}return{}};function Q(t,e,s){let l,n,o;y(t,T,(t=>s(3,n=t))),y(t,V,(t=>s(4,o=t)));let r,a,c=[],i=!1;function d(){n.forEach((t=>{t.edit=!1,t.ready=!1,t.steps.length>0&&t.steps.forEach((t=>{t.editDesc=!1,t.editCode=!1}))}))}B(V,o.save=!1,o);return t.$$.update=()=>{2048&t.$$.dirty&&s(2,l=c)},[a,i,l,n,o,r,d,function(){B(T,n=[...n,{title:"",steps:[],edit:!0,ready:!0,mode:"draft"}],n),B(V,o.showFabs=!0,o),B(V,o.save=!0,o),B(V,o.edit=!1,o);let t=n.length-1;U("/code/"+t)},function(){B(V,o.save=!1,o),U("/code/")},function(t){console.log(r);let e=+t.srcElement.id;s(11,c=[...c,n[e].id])},function(){s(1,i=!0),c.forEach((async t=>{console.log("trashing:",t);const e=await fetch(`/code/${t}.json`,{method:"DELETE",body:JSON.stringify({status:"trash"})});console.log(e),e.ok&&(s(1,i=!1),U("/code",{invalidate:!0}));const l=await e.json();console.log(l)}))},c,()=>{s(0,a=!a)},t=>{d(),B(T,n[t].ready=!0,n),B(V,o.edit=!0,o),B(V,o.showFabs=!0,o)}]}export default class extends t{constructor(t){super(),e(this,t,Q,K,s,{})}}export{q as load};
