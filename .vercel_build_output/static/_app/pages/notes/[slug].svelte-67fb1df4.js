import{S as W,i as X,s as Z,e as g,k as b,c as v,a as d,n as E,d as c,b as f,f as h,G as $,t as T,g as B,H as z,h as x,x as _,j as A,m as D,Y as U,o as O,u as w,v as J,J as ee,w as H,l as R,r as L,D as P,E as C}from"../../chunks/vendor-911147da.js";import{p as te}from"../../chunks/navigation-51b348a1.js";import{M as V}from"../../chunks/index-b43278fd.js";import{B as se}from"../../chunks/index-f86ce38b.js";import"../../chunks/singletons-ff603286.js";function q(u){let e,t,s,l=!u[1]&&F(u),o=u[1]&&G(u);return{c(){e=g("div"),l&&l.c(),t=b(),o&&o.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=d(e);l&&l.l(a),t=E(a),o&&o.l(a),a.forEach(c),this.h()},h(){f(e,"class","mx-auto p-5 md:max-w-md w-full bg-gray-100 rounded mb-16 shadow-lg")},m(r,a){h(r,e,a),l&&l.m(e,null),$(e,t),o&&o.m(e,null),s=!0},p(r,a){r[1]?l&&(l.d(1),l=null):l?l.p(r,a):(l=F(r),l.c(),l.m(e,t)),r[1]?o?(o.p(r,a),a&2&&_(o,1)):(o=G(r),o.c(),_(o,1),o.m(e,null)):o&&(L(),w(o,1,1,()=>{o=null}),H())},i(r){s||(_(o),s=!0)},o(r){w(o),s=!1},d(r){r&&c(e),l&&l.d(),o&&o.d()}}}function F(u){let e,t=u[0].title.rendered+"",s,l,o,r=u[0].content.rendered+"",a,i,m,k,j;return{c(){e=g("h1"),s=T(t),l=b(),o=g("div"),a=b(),i=g("button"),m=T("Edit"),this.h()},l(n){e=v(n,"H1",{});var p=d(e);s=B(p,t),p.forEach(c),l=E(n),o=v(n,"DIV",{});var N=d(o);N.forEach(c),a=E(n),i=v(n,"BUTTON",{class:!0});var M=d(i);m=B(M,"Edit"),M.forEach(c),this.h()},h(){f(i,"class","px-6 py-2 text-white rounded bg-pink-700 hover:bg-pink-500")},m(n,p){h(n,e,p),$(e,s),h(n,l,p),h(n,o,p),o.innerHTML=r,h(n,a,p),h(n,i,p),$(i,m),k||(j=z(i,"click",u[7]),k=!0)},p(n,p){p&1&&t!==(t=n[0].title.rendered+"")&&x(s,t),p&1&&r!==(r=n[0].content.rendered+"")&&(o.innerHTML=r)},d(n){n&&c(e),n&&c(l),n&&c(o),n&&c(a),n&&c(i),k=!1,j()}}}function G(u){let e,t,s,l,o,r,a,i,m,k,j;return i=new se({props:{color:"red",loading:u[4],$$slots:{default:[le]},$$scope:{ctx:u}}}),i.$on("click",u[8]),{c(){e=g("h3"),t=T("Edit Note"),s=b(),l=g("input"),o=b(),r=g("input"),a=b(),A(i.$$.fragment),this.h()},l(n){e=v(n,"H3",{class:!0});var p=d(e);t=B(p,"Edit Note"),p.forEach(c),s=E(n),l=v(n,"INPUT",{class:!0,placeholder:!0,type:!0}),o=E(n),r=v(n,"INPUT",{class:!0,placeholder:!0,type:!0}),a=E(n),D(i.$$.fragment,n),this.h()},h(){f(e,"class","text-center text-2xl mb-5"),f(l,"class","w-full rounded mb-5"),f(l,"placeholder","Title"),f(l,"type","text"),f(r,"class","w-full rounded mb-5"),f(r,"placeholder","Content"),f(r,"type","text")},m(n,p){h(n,e,p),$(e,t),h(n,s,p),h(n,l,p),U(l,u[5]),h(n,o,p),h(n,r,p),U(r,u[6]),h(n,a,p),O(i,n,p),m=!0,k||(j=[z(l,"input",u[11]),z(r,"input",u[12])],k=!0)},p(n,p){p&32&&l.value!==n[5]&&U(l,n[5]),p&64&&r.value!==n[6]&&U(r,n[6]);const N={};p&16&&(N.loading=n[4]),p&8192&&(N.$$scope={dirty:p,ctx:n}),i.$set(N)},i(n){m||(_(i.$$.fragment,n),m=!0)},o(n){w(i.$$.fragment,n),m=!1},d(n){n&&c(e),n&&c(s),n&&c(l),n&&c(o),n&&c(r),n&&c(a),J(i,n),k=!1,ee(j)}}}function le(u){let e;return{c(){e=T("Update")},l(t){e=B(t,"Update")},m(t,s){h(t,e,s)},d(t){t&&c(e)}}}function Y(u){let e,t;return e=new V({props:{color:"green",timeout:3e3,logic:u[9],$$slots:{icon:[re],message:[oe]},$$scope:{ctx:u}}}),{c(){A(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){O(e,s,l),t=!0},p(s,l){const o={};l&8192&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function oe(u){let e,t;return{c(){e=g("span"),t=T("Edit successfull"),this.h()},l(s){e=v(s,"SPAN",{slot:!0,class:!0});var l=d(e);t=B(l,"Edit successfull"),l.forEach(c),this.h()},h(){f(e,"slot","message"),f(e,"class","text-xl")},m(s,l){h(s,e,l),$(e,t)},d(s){s&&c(e)}}}function re(u){let e,t;return{c(){e=P("svg"),t=P("path"),this.h()},l(s){e=C(s,"svg",{slot:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=d(e);t=C(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(c),l.forEach(c),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"stroke-width","2"),f(t,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),f(e,"slot","icon"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class","h-8 w-8 "),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke","currentColor")},m(s,l){h(s,e,l),$(e,t)},d(s){s&&c(e)}}}function K(u){let e,t;return e=new V({props:{color:"red",timeout:2e5,logic:u[10],$$slots:{icon:[ie],message:[ne]},$$scope:{ctx:u}}}),{c(){A(e.$$.fragment)},l(s){D(e.$$.fragment,s)},m(s,l){O(e,s,l),t=!0},p(s,l){const o={};l&8192&&(o.$$scope={dirty:l,ctx:s}),e.$set(o)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function ne(u){let e,t;return{c(){e=g("span"),t=T("There was an error"),this.h()},l(s){e=v(s,"SPAN",{slot:!0,class:!0});var l=d(e);t=B(l,"There was an error"),l.forEach(c),this.h()},h(){f(e,"slot","message"),f(e,"class","text-xl")},m(s,l){h(s,e,l),$(e,t)},d(s){s&&c(e)}}}function ie(u){let e,t;return{c(){e=P("svg"),t=P("path"),this.h()},l(s){e=C(s,"svg",{slot:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=d(e);t=C(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),d(t).forEach(c),l.forEach(c),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"stroke-width","2"),f(t,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),f(e,"slot","icon"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class","h-8 w-8"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke","currentColor")},m(s,l){h(s,e,l),$(e,t)},d(s){s&&c(e)}}}function ae(u){let e,t,s,l,o=!u[2]&&q(u),r=u[2]&&Y(u),a=u[3]&&K(u);return{c(){o&&o.c(),e=b(),r&&r.c(),t=b(),a&&a.c(),s=R()},l(i){o&&o.l(i),e=E(i),r&&r.l(i),t=E(i),a&&a.l(i),s=R()},m(i,m){o&&o.m(i,m),h(i,e,m),r&&r.m(i,m),h(i,t,m),a&&a.m(i,m),h(i,s,m),l=!0},p(i,[m]){i[2]?o&&(L(),w(o,1,1,()=>{o=null}),H()):o?(o.p(i,m),m&4&&_(o,1)):(o=q(i),o.c(),_(o,1),o.m(e.parentNode,e)),i[2]?r?(r.p(i,m),m&4&&_(r,1)):(r=Y(i),r.c(),_(r,1),r.m(t.parentNode,t)):r&&(L(),w(r,1,1,()=>{r=null}),H()),i[3]?a?(a.p(i,m),m&8&&_(a,1)):(a=K(i),a.c(),_(a,1),a.m(s.parentNode,s)):a&&(L(),w(a,1,1,()=>{a=null}),H())},i(i){l||(_(o),_(r),_(a),l=!0)},o(i){w(o),w(r),w(a),l=!1},d(i){o&&o.d(i),i&&c(e),r&&r.d(i),i&&c(t),a&&a.d(i),i&&c(s)}}}const _e=async({page:u,fetch:e})=>{const t=await e(`https://imajenation.co.zw/mydiary/wp-json/wp/v2/note/?slug=${u.params.slug}`);if(t.ok){console.log("res is ok");const o=await(await t.json())[0];return console.log(o),{props:{post:o}}}const{message:s}=await t.json();return{error:new Error(s)}};function ue(u,e,t){let s=!1,{post:l}=e;console.log(l);let o=!1,r=!1,a=!1,i=l.title.rendered,m=l.content.rendered;function k(){t(1,s=!s)}async function j(){let S={title:i,content:m,status:"publish"},I=localStorage.getItem("token");I=JSON.parse(I),t(1,s=!0),t(4,a=!0);try{const y=await fetch(`https://www.imajenation.co.zw/mydiary/wp-json/wp/v2/note/${l.id}`,{method:"PUT",credentials:"include",headers:{"Content-type":"application/json",Authorization:"Bearer "+I},body:JSON.stringify(S)}),Q=await y.json();console.log(Q),y.ok?(t(1,s=!1),t(2,o=!0),t(4,a=!1),te(`/notes/${l.slug}`),location.reload()):(console.log("res has an error"),t(3,r=!0),t(4,a=!1))}catch(y){console.log("ERROR!!!: ",y),t(3,r=!0),t(4,a=!1)}}let n=()=>{t(2,o=!1)},p=()=>{t(3,r=!1)};function N(){i=this.value,t(5,i)}function M(){m=this.value,t(6,m)}return u.$$set=S=>{"post"in S&&t(0,l=S.post)},[l,s,o,r,a,i,m,k,j,n,p,N,M]}class de extends W{constructor(e){super();X(this,e,ue,ae,Z,{post:0})}}export{de as default,_e as load};
