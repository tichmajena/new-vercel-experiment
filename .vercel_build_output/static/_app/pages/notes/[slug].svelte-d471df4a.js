import{S as t,i as e,s,e as o,k as n,c as r,a,n as l,d as c,b as i,f as h,F as d,t as p,g as u,G as m,h as f,x as g,j as $,m as w,X as v,o as x,u as k,v as y,I as E,w as j,l as b,r as N,D as T}from"../../chunks/vendor-233f8ef4.js";import{p as B}from"../../chunks/navigation-e6c17f3a.js";import{M}from"../../chunks/index-1ede7b61.js";import{B as I}from"../../chunks/index-a7651b31.js";import"../../chunks/singletons-ff603286.js";function S(t){let e,s,p,u=!t[1]&&U(t),m=t[1]&&H(t);return{c(){e=o("div"),u&&u.c(),s=n(),m&&m.c(),this.h()},l(t){e=r(t,"DIV",{class:!0});var o=a(e);u&&u.l(o),s=l(o),m&&m.l(o),o.forEach(c),this.h()},h(){i(e,"class","mx-auto p-5 md:max-w-md w-full bg-gray-100 rounded mb-16 shadow-lg")},m(t,o){h(t,e,o),u&&u.m(e,null),d(e,s),m&&m.m(e,null),p=!0},p(t,o){t[1]?u&&(u.d(1),u=null):u?u.p(t,o):(u=U(t),u.c(),u.m(e,s)),t[1]?m?(m.p(t,o),2&o&&g(m,1)):(m=H(t),m.c(),g(m,1),m.m(e,null)):m&&(N(),k(m,1,1,(()=>{m=null})),j())},i(t){p||(g(m),p=!0)},o(t){k(m),p=!1},d(t){t&&c(e),u&&u.d(),m&&m.d()}}}function U(t){let e,s,g,$,w,v,x,k,y,E=t[0].title.rendered+"",j=t[0].content.rendered+"";return{c(){e=o("h1"),s=p(E),g=n(),$=o("div"),w=n(),v=o("button"),x=p("Edit"),this.h()},l(t){e=r(t,"H1",{});var o=a(e);s=u(o,E),o.forEach(c),g=l(t),$=r(t,"DIV",{}),a($).forEach(c),w=l(t),v=r(t,"BUTTON",{class:!0});var n=a(v);x=u(n,"Edit"),n.forEach(c),this.h()},h(){i(v,"class","px-6 py-2 text-white rounded bg-pink-700 hover:bg-pink-500")},m(o,n){h(o,e,n),d(e,s),h(o,g,n),h(o,$,n),$.innerHTML=j,h(o,w,n),h(o,v,n),d(v,x),k||(y=m(v,"click",t[7]),k=!0)},p(t,e){1&e&&E!==(E=t[0].title.rendered+"")&&f(s,E),1&e&&j!==(j=t[0].content.rendered+"")&&($.innerHTML=j)},d(t){t&&c(e),t&&c(g),t&&c($),t&&c(w),t&&c(v),k=!1,y()}}}function H(t){let e,s,f,j,b,N,T,B,M,S,U;return B=new I({props:{color:"red",loading:t[4],$$slots:{default:[P]},$$scope:{ctx:t}}}),B.$on("click",t[8]),{c(){e=o("h3"),s=p("Edit Note"),f=n(),j=o("input"),b=n(),N=o("input"),T=n(),$(B.$$.fragment),this.h()},l(t){e=r(t,"H3",{class:!0});var o=a(e);s=u(o,"Edit Note"),o.forEach(c),f=l(t),j=r(t,"INPUT",{class:!0,placeholder:!0,type:!0}),b=l(t),N=r(t,"INPUT",{class:!0,placeholder:!0,type:!0}),T=l(t),w(B.$$.fragment,t),this.h()},h(){i(e,"class","text-center text-2xl mb-5"),i(j,"class","w-full rounded mb-5"),i(j,"placeholder","Title"),i(j,"type","text"),i(N,"class","w-full rounded mb-5"),i(N,"placeholder","Content"),i(N,"type","text")},m(o,n){h(o,e,n),d(e,s),h(o,f,n),h(o,j,n),v(j,t[5]),h(o,b,n),h(o,N,n),v(N,t[6]),h(o,T,n),x(B,o,n),M=!0,S||(U=[m(j,"input",t[11]),m(N,"input",t[12])],S=!0)},p(t,e){32&e&&j.value!==t[5]&&v(j,t[5]),64&e&&N.value!==t[6]&&v(N,t[6]);const s={};16&e&&(s.loading=t[4]),8192&e&&(s.$$scope={dirty:e,ctx:t}),B.$set(s)},i(t){M||(g(B.$$.fragment,t),M=!0)},o(t){k(B.$$.fragment,t),M=!1},d(t){t&&c(e),t&&c(f),t&&c(j),t&&c(b),t&&c(N),t&&c(T),y(B,t),S=!1,E(U)}}}function P(t){let e;return{c(){e=p("Update")},l(t){e=u(t,"Update")},m(t,s){h(t,e,s)},d(t){t&&c(e)}}}function z(t){let e,s;return e=new M({props:{color:"green",timeout:3e3,logic:t[9],$$slots:{icon:[C],message:[A]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,o){x(e,t,o),s=!0},p(t,s){const o={};8192&s&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function A(t){let e,s;return{c(){e=o("span"),s=p("Edit successfull"),this.h()},l(t){e=r(t,"SPAN",{slot:!0,class:!0});var o=a(e);s=u(o,"Edit successfull"),o.forEach(c),this.h()},h(){i(e,"slot","message"),i(e,"class","text-xl")},m(t,o){h(t,e,o),d(e,s)},d(t){t&&c(e)}}}function C(t){let e,s;return{c(){e=T("svg"),s=T("path"),this.h()},l(t){e=r(t,"svg",{slot:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var o=a(e);s=r(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),a(s).forEach(c),o.forEach(c),this.h()},h(){i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(s,"stroke-width","2"),i(s,"d","M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"),i(e,"slot","icon"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-8 w-8 "),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor")},m(t,o){h(t,e,o),d(e,s)},d(t){t&&c(e)}}}function L(t){let e,s;return e=new M({props:{color:"red",timeout:2e5,logic:t[10],$$slots:{icon:[D],message:[O]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,o){x(e,t,o),s=!0},p(t,s){const o={};8192&s&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){y(e,t)}}}function O(t){let e,s;return{c(){e=o("span"),s=p("There was an error"),this.h()},l(t){e=r(t,"SPAN",{slot:!0,class:!0});var o=a(e);s=u(o,"There was an error"),o.forEach(c),this.h()},h(){i(e,"slot","message"),i(e,"class","text-xl")},m(t,o){h(t,e,o),d(e,s)},d(t){t&&c(e)}}}function D(t){let e,s;return{c(){e=T("svg"),s=T("path"),this.h()},l(t){e=r(t,"svg",{slot:!0,xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var o=a(e);s=r(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),a(s).forEach(c),o.forEach(c),this.h()},h(){i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(s,"stroke-width","2"),i(s,"d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),i(e,"slot","icon"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-8 w-8"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke","currentColor")},m(t,o){h(t,e,o),d(e,s)},d(t){t&&c(e)}}}function R(t){let e,s,o,r,a=!t[2]&&S(t),i=t[2]&&z(t),d=t[3]&&L(t);return{c(){a&&a.c(),e=n(),i&&i.c(),s=n(),d&&d.c(),o=b()},l(t){a&&a.l(t),e=l(t),i&&i.l(t),s=l(t),d&&d.l(t),o=b()},m(t,n){a&&a.m(t,n),h(t,e,n),i&&i.m(t,n),h(t,s,n),d&&d.m(t,n),h(t,o,n),r=!0},p(t,[n]){t[2]?a&&(N(),k(a,1,1,(()=>{a=null})),j()):a?(a.p(t,n),4&n&&g(a,1)):(a=S(t),a.c(),g(a,1),a.m(e.parentNode,e)),t[2]?i?(i.p(t,n),4&n&&g(i,1)):(i=z(t),i.c(),g(i,1),i.m(s.parentNode,s)):i&&(N(),k(i,1,1,(()=>{i=null})),j()),t[3]?d?(d.p(t,n),8&n&&g(d,1)):(d=L(t),d.c(),g(d,1),d.m(o.parentNode,o)):d&&(N(),k(d,1,1,(()=>{d=null})),j())},i(t){r||(g(a),g(i),g(d),r=!0)},o(t){k(a),k(i),k(d),r=!1},d(t){a&&a.d(t),t&&c(e),i&&i.d(t),t&&c(s),d&&d.d(t),t&&c(o)}}}const V=async({page:t,fetch:e})=>{const s=await e(`https://imajenation.co.zw/mydiary/wp-json/wp/v2/note/?slug=${t.params.slug}`);if(s.ok){console.log("res is ok");const t=await s.json(),e=await t[0];return console.log(e),{props:{post:e}}}const{message:o}=await s.json();return{error:new Error(o)}};function J(t,e,s){let o=!1,{post:n}=e;console.log(n);let r=!1,a=!1,l=!1,c=n.title.rendered,i=n.content.rendered;return t.$$set=t=>{"post"in t&&s(0,n=t.post)},[n,o,r,a,l,c,i,function(){s(1,o=!o)},async function(){let t={title:c,content:i,status:"publish"},e=localStorage.getItem("token");e=JSON.parse(e),s(1,o=!0),s(4,l=!0);try{const c=await fetch(`https://www.imajenation.co.zw/mydiary/wp-json/wp/v2/note/${n.id}`,{method:"PUT",credentials:"include",headers:{"Content-type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}),i=await c.json();console.log(i),c.ok?(s(1,o=!1),s(2,r=!0),s(4,l=!1),B(`/notes/${n.slug}`),location.reload()):(console.log("res has an error"),s(3,a=!0),s(4,l=!1))}catch(h){console.log("ERROR!!!: ",h),s(3,a=!0),s(4,l=!1)}},()=>{s(2,r=!1)},()=>{s(3,a=!1)},function(){c=this.value,s(5,c)},function(){i=this.value,s(6,i)}]}class F extends t{constructor(t){super(),e(this,t,J,R,s,{post:0})}}export{F as default,V as load};
