import{S as t,i as e,s,e as o,t as n,k as a,c as l,a as r,g as c,d as i,n as d,b as p,f as u,G as h,H as f,h as m,O as g,J as w,I as y}from"../../chunks/vendor-66f8d0bb.js";function b(t){let e,s,g,w,y,b,v,x,k,E=t[0].title.rendered+"",T=t[0].content.rendered+"";return{c(){e=o("h1"),s=n(E),g=a(),w=o("div"),y=a(),b=o("button"),v=n("Edit"),this.h()},l(t){e=l(t,"H1",{});var o=r(e);s=c(o,E),o.forEach(i),g=d(t),w=l(t,"DIV",{}),r(w).forEach(i),y=d(t),b=l(t,"BUTTON",{class:!0});var n=r(b);v=c(n,"Edit"),n.forEach(i),this.h()},h(){p(b,"class","px-6 py-2 text-white rounded bg-pink-700 hover:bg-pink-500")},m(o,n){u(o,e,n),h(e,s),u(o,g,n),u(o,w,n),w.innerHTML=T,u(o,y,n),u(o,b,n),h(b,v),x||(k=f(b,"click",t[4]),x=!0)},p(t,e){1&e&&E!==(E=t[0].title.rendered+"")&&m(s,E),1&e&&T!==(T=t[0].content.rendered+"")&&(w.innerHTML=T)},d(t){t&&i(e),t&&i(g),t&&i(w),t&&i(y),t&&i(b),x=!1,k()}}}function v(t){let e,s,m,y,b,v,x,k,E,T,j;return{c(){e=o("h3"),s=n("Edit Note"),m=a(),y=o("input"),b=a(),v=o("input"),x=a(),k=o("button"),E=n("Update"),this.h()},l(t){e=l(t,"H3",{class:!0});var o=r(e);s=c(o,"Edit Note"),o.forEach(i),m=d(t),y=l(t,"INPUT",{class:!0,placeholder:!0,type:!0}),b=d(t),v=l(t,"INPUT",{class:!0,placeholder:!0,type:!0}),x=d(t),k=l(t,"BUTTON",{class:!0});var n=r(k);E=c(n,"Update"),n.forEach(i),this.h()},h(){p(e,"class","text-center text-2xl mb-5"),p(y,"class","w-full rounded mb-5"),p(y,"placeholder","Title"),p(y,"type","text"),p(v,"class","w-full rounded mb-5"),p(v,"placeholder","Content"),p(v,"type","text"),p(k,"class","px-6 py-2 text-white rounded bg-pink-700 hover:bg-pink-500")},m(o,n){u(o,e,n),h(e,s),u(o,m,n),u(o,y,n),g(y,t[2]),u(o,b,n),u(o,v,n),g(v,t[3]),u(o,x,n),u(o,k,n),h(k,E),T||(j=[f(y,"input",t[6]),f(v,"input",t[7]),f(k,"click",t[5])],T=!0)},p(t,e){4&e&&y.value!==t[2]&&g(y,t[2]),8&e&&v.value!==t[3]&&g(v,t[3])},d(t){t&&i(e),t&&i(m),t&&i(y),t&&i(b),t&&i(v),t&&i(x),t&&i(k),T=!1,w(j)}}}function x(t){let e,s,n=!t[1]&&b(t),c=t[1]&&v(t);return{c(){e=o("div"),n&&n.c(),s=a(),c&&c.c(),this.h()},l(t){e=l(t,"DIV",{class:!0});var o=r(e);n&&n.l(o),s=d(o),c&&c.l(o),o.forEach(i),this.h()},h(){p(e,"class","mx-auto p-5 md:max-w-md w-full bg-gray-100 rounded mb-16 shadow-lg")},m(t,o){u(t,e,o),n&&n.m(e,null),h(e,s),c&&c.m(e,null)},p(t,[o]){t[1]?n&&(n.d(1),n=null):n?n.p(t,o):(n=b(t),n.c(),n.m(e,s)),t[1]?c?c.p(t,o):(c=v(t),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:y,o:y,d(t){t&&i(e),n&&n.d(),c&&c.d()}}}const k=async t=>{const e=await fetch(`https://imajenation.co.zw/mydiary/wp-json/wp/v2/note/?slug=${t.page.params.slug}`);if(e.ok){console.log("res is ok");const t=await e.json(),s=await t[0];return console.log(s),{props:{post:s}}}const{message:s}=await e.json();return{error:new Error(s)}};function E(t,e,s){let o=!1,{post:n}=e;console.log(n);let a=n.title.rendered,l=n.content.rendered;return t.$$set=t=>{"post"in t&&s(0,n=t.post)},[n,o,a,l,function(){s(1,o=!o)},async function(){let t={title:a,content:l,status:"publish"},e=localStorage.getItem("token");e=JSON.parse(e);try{const a=await fetch(`https://www.imajenation.co.zw/mydiary/wp-json/wp/v2/note/${n.id}`,{method:"PUT",credentials:"include",headers:{"Content-type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(t)}),l=await a.json();console.log(l),a.ok?(console.log("res is okay"),console.log(l),s(1,o=!1)):console.log("res has an error")}catch(r){console.log("ERROR!!!: ",r)}},function(){a=this.value,s(2,a)},function(){l=this.value,s(3,l)}]}export default class extends t{constructor(t){super(),e(this,t,E,x,s,{post:0})}}export{k as load};
